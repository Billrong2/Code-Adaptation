{
  "code": "public static int computeSquareMeasureSpec(final android.view.ViewGroup parent, final int widthMeasureSpec, final int heightMeasureSpec) {\n    // Validate (unused) parent for API contract clarity\n    if (parent == null) {\n        // No parent context; proceed with safe defaults\n    }\n\n    final int widthMode = android.view.View.MeasureSpec.getMode(widthMeasureSpec);\n    final int widthSize = android.view.View.MeasureSpec.getSize(widthMeasureSpec);\n    final int heightMode = android.view.View.MeasureSpec.getMode(heightMeasureSpec);\n    final int heightSize = android.view.View.MeasureSpec.getSize(heightMeasureSpec);\n\n    int size;\n\n    if (widthMode == android.view.View.MeasureSpec.EXACTLY && widthSize > 0) {\n        size = widthSize;\n    } else if (heightMode == android.view.View.MeasureSpec.EXACTLY && heightSize > 0) {\n        size = heightSize;\n    } else {\n        final int safeWidth = widthMode == android.view.View.MeasureSpec.UNSPECIFIED ? 0 : Math.max(0, widthSize);\n        final int safeHeight = heightMode == android.view.View.MeasureSpec.UNSPECIFIED ? 0 : Math.max(0, heightSize);\n        size = safeWidth < safeHeight ? safeWidth : safeHeight;\n    }\n\n    if (size < 0) {\n        size = 0;\n    }\n\n    // Always return an EXACTLY square MeasureSpec; callers must apply it to both width and height\n    return android.view.View.MeasureSpec.makeMeasureSpec(size, android.view.View.MeasureSpec.EXACTLY);\n}",
  "explanation": "code_hardening: Added explicit handling for UNSPECIFIED modes and non-positive sizes, clamped negative results to zero, used final for parameters and locals, and included a null-check for the unused ViewGroup parameter to clarify the contract.\nresolve_compilation_errors: Replaced implicit MeasureSpec references with fully qualified android.view.View.MeasureSpec, removed any dependency on View subclasses or super.onMeasure, and made the method public static for use from non-View classes.\nexception_handling: none.\nlogic_customization: Preserved the exact size-selection priority (EXACTLY width, else EXACTLY height, else min), refactored the logic to compute and return a single squared MeasureSpec, and ensured the returned MeasureSpec is always created with EXACTLY.\nrefactoring: Extracted the measurement logic into a clearly named public static utility method decoupled from onMeasure and class foo, and simplified variable naming for clarity and reuse.\nmisc: Added concise inline comments documenting expected caller usage and formatted the code in a utility-style layout. New custom API calls: none."
}