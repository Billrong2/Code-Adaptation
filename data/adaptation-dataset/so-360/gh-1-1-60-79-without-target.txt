package edu.mit.mitmobile2;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.util.HashMap;
import java.util.Map;
import java.util.regex.Pattern;
import java.util.regex.Matcher;

import android.content.Context;


public class StyledContentHTML {

	public static String html(Context context, String bodyHTML) {
		HashMap<String, String> content = new HashMap<String, String>();
		content.put("BODY", bodyHTML);
		return populateTemplate(context, "content_template.html", content);
	}
	
	public static String imageHtml(Context context, String url) {
		HashMap<String, String> content = new HashMap<String, String>();
		content.put("URL", url);
		return populateTemplate(context, "image_template.html", content);
	}
    
	public static String populateTemplate(Context context, String templateName, Map<String, String> content) {
		InputStream templateInputStream;
		try {
			templateInputStream = context.getAssets().open(templateName);
		} catch (IOException e) {
			
			e.printStackTrace();
			throw new RuntimeException(e.getMessage());
		}
		String template = slurp(templateInputStream);
		return replaceTokens(template, content);
	}
	
    private static String slurp(InputStream stream) {
        
        BufferedReader reader = new BufferedReader(new InputStreamReader(stream));
        StringBuilder stringBuilder = new StringBuilder();
 
        String line = null;
        try {
            while ((line = reader.readLine()) != null) {
                stringBuilder.append(line + "\n");
            }
        } catch (IOException e) {
            e.printStackTrace();
            throw new RuntimeException(e.getMessage());
        } 
        
        return stringBuilder.toString();
    }
    
        // TODO

}
