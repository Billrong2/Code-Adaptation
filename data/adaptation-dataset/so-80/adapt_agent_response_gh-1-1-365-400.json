{
  "code": "@NonNull private static Bitmap scaleCropToFit(@NonNull Bitmap original, int targetWidth, int targetHeight) {\n        // Scale the image while preserving aspect ratio, then crop to target size.\n        final int originalWidth = original.getWidth();\n        final int originalHeight = original.getHeight();\n\n        final float widthScale = (float) targetWidth / (float) originalWidth;\n        final float heightScale = (float) targetHeight / (float) originalHeight;\n\n        int startX = 0;\n        int startY = 0;\n        int scaledWidth;\n        int scaledHeight;\n\n        if (widthScale > heightScale) {\n            // Scale by width; crop vertically (centered, clamped)\n            scaledWidth = targetWidth;\n            scaledHeight = Math.round(originalHeight * widthScale);\n            int unclampedStartY = (scaledHeight - targetHeight) / 2;\n            startY = Math.max(0, Math.min(unclampedStartY, Math.max(0, scaledHeight - targetHeight)));\n        } else {\n            // Scale by height; crop horizontally from the left edge (no centering)\n            scaledHeight = targetHeight;\n            scaledWidth = Math.round(originalWidth * heightScale);\n            startX = 0;\n        }\n\n        Bitmap scaledBitmap = Bitmap.createScaledBitmap(original, scaledWidth, scaledHeight, true);\n        Bitmap resizedBitmap = Bitmap.createBitmap(scaledBitmap, startX, startY, targetWidth, targetHeight);\n\n        // Free the intermediate scaled bitmap to reduce memory usage.\n        if (!scaledBitmap.isRecycled()) {\n            scaledBitmap.recycle();\n        }\n\n        return resizedBitmap;\n    }",
  "explanation": "code_hardening: Added @NonNull annotations to the Bitmap parameter and return value, clamped the computed startY to the valid range to prevent out-of-bounds cropping, and recycled the intermediate scaled bitmap after creating the final bitmap.\nresolve_compilation_errors: Changed method visibility to private static to match usage within the class and used the existing android.support.annotation.NonNull annotation available in the project.\nexception_handling: none\nlogic_customization: Preserved the original aspect-ratio decision logic; when scaling by width, the vertical crop is centered and startY is clamped; when scaling by height, horizontal cropping is performed from the left edge by keeping startX at 0.\nrefactoring: none\nmisc: none"}