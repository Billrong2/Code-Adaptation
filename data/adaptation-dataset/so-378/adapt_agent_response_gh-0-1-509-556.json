{
  "code": "public static void lockOrientation(android.app.Activity activity) {\n    if (activity == null) {\n        return;\n    }\n\n    android.view.WindowManager windowManager = activity.getWindowManager();\n    if (windowManager == null) {\n        return;\n    }\n\n    android.view.Display display = windowManager.getDefaultDisplay();\n    if (display == null) {\n        return;\n    }\n\n    android.graphics.Point size = new android.graphics.Point();\n    display.getSize(size);\n    int width = size.x;\n    int height = size.y;\n\n    int rotation = display.getRotation();\n\n    switch (rotation) {\n        case android.view.Surface.ROTATION_90:\n            if (width > height) {\n                activity.setRequestedOrientation(android.content.pm.ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);\n            }\n            else {\n                activity.setRequestedOrientation(android.content.pm.ActivityInfo.SCREEN_ORIENTATION_REVERSE_PORTRAIT);\n            }\n            break;\n        case android.view.Surface.ROTATION_180:\n            if (height > width) {\n                activity.setRequestedOrientation(android.content.pm.ActivityInfo.SCREEN_ORIENTATION_REVERSE_PORTRAIT);\n            }\n            else {\n                activity.setRequestedOrientation(android.content.pm.ActivityInfo.SCREEN_ORIENTATION_REVERSE_LANDSCAPE);\n            }\n            break;\n        case android.view.Surface.ROTATION_270:\n            if (width > height) {\n                activity.setRequestedOrientation(android.content.pm.ActivityInfo.SCREEN_ORIENTATION_REVERSE_LANDSCAPE);\n            }\n            else {\n                activity.setRequestedOrientation(android.content.pm.ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);\n            }\n            break;\n        default:\n            // Fallback for unexpected rotation values\n            if (height > width) {\n                activity.setRequestedOrientation(android.content.pm.ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);\n            }\n            else {\n                activity.setRequestedOrientation(android.content.pm.ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);\n            }\n            break;\n    }\n}",
  "explanation": "code_hardening: Added null checks for the Activity, WindowManager, and Display to avoid NullPointerExceptions, and included a default fallback in the rotation switch to handle unexpected rotation values.\nresolve_compilation_errors: Removed all references to instance members and legacy calls, routing window/display access and setRequestedOrientation through the passed Activity parameter and using fully qualified Android class names to avoid missing imports.\nexception_handling: none.\nlogic_customization: Converted the method into a public static utility accepting an Activity, always obtained screen dimensions via Display.getSize(Point), and preserved the original rotation-based orientation mapping logic while applying it through the Activity.\nrefactoring: Replaced magic numeric orientation values (8, 9) with ActivityInfo.SCREEN_ORIENTATION_REVERSE_LANDSCAPE and SCREEN_ORIENTATION_REVERSE_PORTRAIT, and simplified local variable usage for clarity.\nmisc: Removed deprecated annotations and legacy SDK conditionals, reformatted the method for utility-style use, and added a brief fallback comment; no new custom API calls were introduced."
}