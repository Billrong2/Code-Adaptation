{
  "code": "// Reference: Based on a Stack Overflow answer for dynamically sizing a ListView based on its children.\npublic static void setListViewHeightBasedOnChildren(final android.widget.ListView listView) {\n    final android.widget.ListAdapter listAdapter = listView.getAdapter();\n    if (listAdapter == null) return; // pre-condition\n\n    int totalHeight = listView.getPaddingTop() + listView.getPaddingBottom();\n\n    for (int i = 0; i < listAdapter.getCount(); i++) {\n        final android.view.View listItem = listAdapter.getView(i, null, listView);\n        if (listItem instanceof android.view.ViewGroup) {\n            listItem.setLayoutParams(new android.view.ViewGroup.LayoutParams(\n                    android.view.ViewGroup.LayoutParams.WRAP_CONTENT,\n                    android.view.ViewGroup.LayoutParams.WRAP_CONTENT));\n        }\n\n        listItem.measure(0, 0);\n        totalHeight += listItem.getMeasuredHeight();\n    }\n\n    final android.view.ViewGroup.LayoutParams params = listView.getLayoutParams();\n    params.height = totalHeight + (listView.getDividerHeight() * (listAdapter.getCount() - 1));\n    listView.setLayoutParams(params);\n}",
  "explanation": "code_hardening: Reviewed existing guards and kept behavior unchanged; added final modifiers to parameters and locals where safe.\nresolve_compilation_errors: Used fully qualified android.view.ViewGroup.LayoutParams and other Android types inside the function to avoid import ambiguity.\nexception_handling: none.\nlogic_customization: none.\nrefactoring: Condensed the null-adapter guard into a single-line early return and applied minor whitespace/formatting adjustments without altering logic.\nmisc: Added a brief reference comment above the method pointing to the original Stack Overflow source; no new custom API calls were introduced."
}