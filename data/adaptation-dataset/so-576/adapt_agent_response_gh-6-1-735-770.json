{
  "code": "    /**\n     * Translates the specified byte array into a Base64 string.\n     * <p>\n     * Internal helper used for WebSocket accept key generation.\n     *\n     * @param buf the byte array (not null)\n     * @return the translated Base64 string (not null)\n     */\n    private static String encodeBase64(byte[] buf) {\n        int size = buf.length;\n        char[] ar = new char[((size + 2) / 3) * 4];\n        int a = 0;\n        int i = 0;\n        while (i < size) {\n            byte b0 = buf[i++];\n            byte b1 = (i < size) ? buf[i++] : 0;\n            byte b2 = (i < size) ? buf[i++] : 0;\n\n            int mask = 0x3F;\n            ar[a++] = NanoWebSocketServer.ALPHABET[(b0 >> 2) & mask];\n            ar[a++] = NanoWebSocketServer.ALPHABET[((b0 << 4) | ((b1 & 0xFF) >> 4)) & mask];\n            ar[a++] = NanoWebSocketServer.ALPHABET[((b1 << 2) | ((b2 & 0xFF) >> 6)) & mask];\n            ar[a++] = NanoWebSocketServer.ALPHABET[b2 & mask];\n        }\n        switch (size % 3) {\n            case 1:\n                ar[--a] = '=';\n            case 2:\n                ar[--a] = '=';\n        }\n        return new String(ar);\n    }",
  "explanation": "code_hardening: none\nresolve_compilation_errors: Updated alphabet references to use NanoWebSocketServer.ALPHABET so the constant is properly resolved within the enclosing class.\nexception_handling: none\nlogic_customization: Preserved the original Base64 encoding and padding algorithm exactly, ensuring identical behavior when used by makeAcceptKey.\nrefactoring: Renamed the method from encode to encodeBase64, changed visibility to private while keeping it static, and updated the method comment to reflect its internal usage.\nmisc: Minor documentation updates only; no additional APIs introduced."
}