{
  "code": "/**\n     * Checks whether a specific accessibility service is enabled for the given application context.\n     *\n     * @param context the context used to access system settings\n     * @param serviceClass the accessibility service class to check\n     * @return true if the specified accessibility service is enabled, false otherwise\n     */\n    public static boolean isServiceEnabled(final Context context, final Class<?> serviceClass) {\n        if (context == null || serviceClass == null) {\n            Timber.d(\"Context or serviceClass is null; accessibility service cannot be resolved\");\n            return false;\n        }\n\n        final String targetService = context.getPackageName() + \"/\" + serviceClass.getName();\n        int accessibilityEnabled = 0;\n\n        try {\n            accessibilityEnabled = Settings.Secure.getInt(\n                    context.getContentResolver(),\n                    Settings.Secure.ACCESSIBILITY_ENABLED\n            );\n            Timber.d(\"ACCESSIBILITY_ENABLED=%d\", accessibilityEnabled);\n        } catch (Settings.SettingNotFoundException e) {\n            Timber.e(e, \"Error reading ACCESSIBILITY_ENABLED setting\");\n            return false;\n        }\n\n        if (accessibilityEnabled != 1) {\n            Timber.d(\"Accessibility services are disabled\");\n            return false;\n        }\n\n        final String settingValue = Settings.Secure.getString(\n                context.getContentResolver(),\n                Settings.Secure.ENABLED_ACCESSIBILITY_SERVICES\n        );\n\n        if (TextUtils.isEmpty(settingValue)) {\n            Timber.d(\"No enabled accessibility services found\");\n            return false;\n        }\n\n        final TextUtils.SimpleStringSplitter splitter = new TextUtils.SimpleStringSplitter(':');\n        splitter.setString(settingValue);\n\n        while (splitter.hasNext()) {\n            final String enabledService = splitter.next();\n            if (enabledService != null && enabledService.equalsIgnoreCase(targetService)) {\n                Timber.d(\"Accessibility service %s is enabled\", targetService);\n                return true;\n            }\n        }\n\n        Timber.d(\"Accessibility service %s is not enabled\", targetService);\n        return false;\n    }",
  "explanation": "code_hardening: Added null checks for context and serviceClass, validated the retrieved setting string with TextUtils.isEmpty, used final modifiers for locals, and safely handled empty or unexpected accessibility settings formats.\nresolve_compilation_errors: Replaced instance ContentResolver access with context.getContentResolver(), ensured correct references to Settings, TextUtils, and Timber, and removed unused state by returning directly instead of relying on a mutable flag.\nexception_handling: Explicitly caught Settings.SettingNotFoundException and logged it with Timber.e before safely returning false.\nlogic_customization: Renamed the method to isServiceEnabled with signature (Context, Class<?>), dynamically built the component name from context.getPackageName() and serviceClass.getName(), and preserved the core logic of checking ACCESSIBILITY_ENABLED and parsing ENABLED_ACCESSIBILITY_SERVICES.\nrefactoring: Converted the logic into a static utility method, removed hard-coded service strings and magic values, improved variable naming for clarity, and simplified control flow with early returns.\nmisc: Replaced Log.d usage with Timber.d/e and updated log messages for clarity, and added a descriptive JavaDoc-style comment explaining the methodâ€™s purpose and parameters. New custom API calls: none."
}