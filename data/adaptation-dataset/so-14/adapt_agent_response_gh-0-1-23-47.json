{
"code":"@Override\npublic void setBoundsForFrame(JComponent f, int newX, int newY, int newWidth, int newHeight) {\n    boolean didResize = (f.getWidth() != newWidth || f.getHeight() != newHeight);\n\n    // Safely determine parent dimensions\n    java.awt.Container parent = f.getParent();\n    if (!(f instanceof JInternalFrame) || parent == null) {\n        f.setBounds(newX, newY, newWidth, newHeight);\n        if (didResize) {\n            f.validate();\n        }\n        return;\n    }\n\n    JInternalFrame frame = (JInternalFrame) f;\n\n    if (!inBounds(frame, newX, newY, newWidth, newHeight)) {\n        java.awt.Dimension parentSize = parent.getSize();\n\n        int parentWidth = Math.max(0, parentSize.width);\n        int parentHeight = Math.max(0, parentSize.height);\n\n        // Clamp width/height so they never exceed the parent\n        int adjustedWidth = Math.min(newWidth, parentWidth);\n        int adjustedHeight = Math.min(newHeight, parentHeight);\n\n        // Recalculate and clamp X/Y using adjusted size\n        int maxX = Math.max(0, parentWidth - adjustedWidth);\n        int maxY = Math.max(0, parentHeight - adjustedHeight);\n\n        int boundedX = Math.min(Math.max(0, newX), maxX);\n        int boundedY = Math.min(Math.max(0, newY), maxY);\n\n        f.setBounds(boundedX, boundedY, adjustedWidth, adjustedHeight);\n    } else {\n        // Preserve existing behavior for in-bounds cases\n        f.setBounds(newX, newY, newWidth, newHeight);\n    }\n\n    if (didResize) {\n        f.validate();\n    }\n}",
"explanation":"code_hardening: Added null checks for the parent container, guarded the JInternalFrame cast, clamped parent dimensions to non-negative values, and ensured width/height and X/Y calculations cannot produce negative or invalid bounds.\nresolve_compilation_errors: Used fully qualified names for java.awt.Container and java.awt.Dimension within the function and guarded the cast to javax.swing.JInternalFrame to ensure validity in all call contexts.\nexception_handling: none.\nlogic_customization: In the out-of-bounds branch, first clamped newWidth/newHeight to the parentâ€™s dimensions, then recalculated bounded X and Y using the adjusted size and explicitly clamped them to the range [0, parentDimension - adjustedSize]. Preserved the original in-bounds behavior and resize validation.\nrefactoring: Introduced local variables (parentWidth, parentHeight, adjustedWidth, adjustedHeight, maxX, maxY) to improve readability and clarify intent.\nmisc: none."
}