{
  "code": "public static void assertUtilityClassWellDefined(Class<?> clazz)\n        throws NoSuchMethodException, InvocationTargetException,\n        InstantiationException, IllegalAccessException {\n  /**\n   * Verifies that a utility class is well defined.\n   * <p>\n   * A well-defined utility class is final, has exactly one private\n   * no-argument constructor, and declares no non-static methods.\n   * </p>\n   *\n   * @author Savelii Zagurskii\n   * @see https://stackoverflow.com/questions/4520216/how-to-add-test-for-private-constructor\n   */\n\n  if (clazz == null) {\n    throw new NullPointerException(\"Class under test must not be null.\");\n  }\n\n  Assert.assertTrue(\"Class must be final.\", Modifier.isFinal(clazz.getModifiers()));\n  Assert.assertEquals(\"There must be only one constructor.\", 1, clazz.getDeclaredConstructors().length);\n\n  Constructor<?> constructor = clazz.getDeclaredConstructor();\n  if (constructor.canAccess(null) || !Modifier.isPrivate(constructor.getModifiers())) {\n    Assert.fail(\"Constructor must be private.\");\n  }\n\n  boolean accessible = constructor.canAccess(null);\n  try {\n    if (!accessible) {\n      constructor.setAccessible(true);\n    }\n    constructor.newInstance();\n  } finally {\n    if (!accessible) {\n      constructor.setAccessible(false);\n    }\n  }\n\n  for (Method method : clazz.getMethods()) {\n    if (!Modifier.isStatic(method.getModifiers())\n        && method.getDeclaringClass().equals(clazz)) {\n      Assert.fail(\"There exists a non-static method: \" + method);\n    }\n  }\n}",
  "explanation": "code_hardening: Added a null check for the clazz parameter to fail fast with a clear NullPointerException. Guarded reflective accessibility changes by capturing the prior access state and restoring it in a finally block, with use of canAccess for newer Java versions.\nresolve_compilation_errors: Standardized on org.junit.Assert assertions already present in the project and replaced deprecated isAccessible() with canAccess(null) to remain compatible with newer JDKs.\nexception_handling: Preserved the original checked-exception signature so existing tests can call the method without behavioral changes, while ensuring reflective accessibility is restored even when exceptions occur.\nlogic_customization: Kept the original utility-class validation logic intact (final class, single private no-arg constructor, no non-static methods) and only adjusted assertion message text to match project conventions.\nrefactoring: Removed unnecessary final modifiers from parameters and locals, improved variable naming clarity, standardized formatting and brace style, and enhanced the Javadoc with author and reference information.\nmisc: Standardized assertion message capitalization and punctuation and added concise documentation comments consistent with the existing test style. No new custom API calls were introduced."
}