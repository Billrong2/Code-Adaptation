{
  "code": "public static @NotNull Integer versionCompare(@Nullable String str1, @Nullable String str2) {\n    // Null-safe and whitespace-tolerant comparison of dotted numeric version strings\n    if (str1 == null && str2 == null) {\n      return Integer.valueOf(0);\n    }\n    if (str1 == null) {\n      return Integer.valueOf(-1);\n    }\n    if (str2 == null) {\n      return Integer.valueOf(1);\n    }\n\n    final String left = str1.trim();\n    final String right = str2.trim();\n\n    final String[] parts1 = left.split(\"\\\\.\");\n    final String[] parts2 = right.split(\"\\\\.\");\n\n    int index = 0;\n    // set index to first non-equal ordinal or length of shortest version string\n    while (index < parts1.length && index < parts2.length && parts1[index].equals(parts2[index])) {\n      index++;\n    }\n\n    // compare first non-equal ordinal number\n    if (index < parts1.length && index < parts2.length) {\n      try {\n        // optional numeric validation before parsing\n        if (!parts1[index].matches(\"\\\\d+\") || !parts2[index].matches(\"\\\\d+\")) {\n          throw new NumberFormatException(\"Non-numeric version segment\");\n        }\n        int diff = Integer.valueOf(parts1[index]).compareTo(Integer.valueOf(parts2[index]));\n        return Integer.valueOf(Integer.signum(diff));\n      }\n      catch (NumberFormatException e) {\n        // propagate with clearer context\n        throw new IllegalArgumentException(\"Invalid version format: '\" + left + \"' vs '\" + right + \"'\", e);\n      }\n    }\n    else {\n      // the strings are equal or one string is a substring of the other\n      // e.g. \"1.2.3\" = \"1.2.3\" or \"1.2.3\" < \"1.2.3.4\"\n      return Integer.valueOf(Integer.signum(parts1.length - parts2.length));\n    }\n  }",
  "explanation": "code_hardening: Added null checks for both inputs to avoid NullPointerException, applied trim() to handle accidental whitespace, and validated that version segments are numeric before parsing.\nresolve_compilation_errors: Changed the return type from primitive int to boxed Integer while preserving the method name, parameters, and static modifier so existing callers continue to compile via auto-unboxing.\nexception_handling: Wrapped numeric parsing in a try/catch, converting NumberFormatException into an IllegalArgumentException with clearer context rather than failing silently.\nlogic_customization: Kept the comparison algorithm identical to the original, and wrapped the final return in an explicit else block as required; no changes to version equality semantics (e.g., \"1.10\" vs \"1.10.0\").\nrefactoring: Renamed local variables (vals1/vals2/i to parts1/parts2/index) for clarity and adjusted inline comments formatting.\nmisc: Minor comment formatting adjustments consistent with existing style; no new custom API calls introduced."
}