{
  "code": "/**\n     * Adjusts the text size so that the provided text fits within the given width.\n     * <p>\n     * This method measures the rendered width of the text using a test {@link Paint}\n     * and performs a binary search to find the largest text size (in pixels) that\n     * fits within the available horizontal space, accounting for view padding.\n     * </p>\n     *\n     * @param text the text to be measured and fitted\n     * @param textWidth the total available width in pixels\n     */\n    private void refitText(String text, int textWidth) {\n        if (textWidth <= 0) {\n            return;\n        }\n\n        int targetWidth = textWidth - this.getPaddingLeft() - this.getPaddingRight();\n        float hi = 100f;\n        float lo = 2f;\n        final float threshold = 0.5f; // How close we have to be\n\n        mTestPaint.set(this.getPaint());\n\n        while ((hi - lo) > threshold) {\n            float size = (hi + lo) / 2f;\n            mTestPaint.setTextSize(size);\n\n            if (mTestPaint.measureText(text) >= targetWidth) {\n                hi = size; // too big\n            } else {\n                lo = size; // too small\n            }\n        }\n\n        // Use lo so that we undershoot rather than overshoot\n        this.setTextSize(TypedValue.COMPLEX_UNIT_PX, lo);\n    }",
  "explanation": "code_hardening: none\nresolve_compilation_errors: none\nexception_handling: none\nlogic_customization: none\nrefactoring: none\nmisc: Added a JavaDoc-style comment describing the purpose, behavior, and parameters of refitText, and applied minor formatting and whitespace adjustments for readability without altering logic or behavior."
}