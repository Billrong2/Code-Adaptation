{
  "code": "public static List<Object> toList(final JSONArray array) throws JSONException {\n    final List<Object> list = new ArrayList<Object>();\n\n    if (array == null || array == JSONArray.NULL) {\n        return list;\n    }\n\n    for (int i = 0; i < array.length(); i++) {\n        Object value = array.get(i);\n\n        if (value instanceof JSONArray) {\n            value = toList((JSONArray) value);\n        } else if (value instanceof JSONObject) {\n            value = toMap((JSONObject) value);\n        }\n        // primitives and null are added as-is\n        list.add(value);\n    }\n\n    return list;\n}",
  "explanation": "code_hardening: Added null/JSONArray.NULL checks for the input array to avoid NPEs, used final for the parameter and local list, and safely handled unexpected element types by passing primitives and nulls through unchanged.\nresolve_compilation_errors: Updated the method signature to return List<Object> and accept JSONArray, used existing project types (java.util.List, java.util.ArrayList, org.json.JSONArray), and referenced the already-present toMap(JSONObject) method.\nexception_handling: Preserved the throws JSONException declaration and relied on JSONArray.get(int) to maintain the same exception behavior as existing JSONObject access.\nlogic_customization: Replaced key-based iteration with index-based iteration over the JSONArray, built a List by adding each processed element, and maintained recursive handling for nested JSONArrays (toList) and JSONObjects (toMap).\nrefactoring: Renamed variables to list-oriented names (list, array, value) and simplified control flow for clarity while staying within a single function.\nmisc: none"
}