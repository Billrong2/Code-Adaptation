{
  "code": "public static int getTextViewHeight(TextView textView) {\n    if (textView == null) {\n        return 0;\n    }\n    final Context context = textView.getContext();\n    if (context == null) {\n        return 0;\n    }\n    final WindowManager wm = (WindowManager) context.getSystemService(Context.WINDOW_SERVICE);\n    if (wm == null) {\n        return 0;\n    }\n\n    final Display display = wm.getDefaultDisplay();\n    final Point size = new Point();\n    display.getSize(size);\n    final int screenWidthPx = size.x;\n\n    int widthMeasureSpec = View.MeasureSpec.makeMeasureSpec(screenWidthPx, View.MeasureSpec.AT_MOST);\n    int heightMeasureSpec = View.MeasureSpec.makeMeasureSpec(0, View.MeasureSpec.UNSPECIFIED);\n    textView.measure(widthMeasureSpec, heightMeasureSpec);\n    return textView.getMeasuredHeight();\n}",
  "explanation": "code_hardening: Added null checks for TextView, Context, and WindowManager to prevent NullPointerException and return a safe default of 0; marked local variables as final where applicable.\nresolve_compilation_errors: Removed deprecated Display.getWidth() usage and all SDK version conditionals; relied on Display.getSize(Point) with existing android.graphics.Point and android.view.WindowManager types already present in the project.\nexception_handling: None; the method uses unchecked Android framework calls and follows the plan to avoid explicit try/catch.\nlogic_customization: Always obtains the device width via Display.getSize(Point) and preserves the original MeasureSpec logic (AT_MOST with screen width and UNSPECIFIED height).\nrefactoring: Simplified control flow by removing legacy branches and renamed the width variable to screenWidthPx for clarity.\nmisc: Updated behavior implicitly drops support for pre-HONEYCOMB_MR2 devices; formatting and style align with existing Utils static helper methods. New custom API calls: none."
}