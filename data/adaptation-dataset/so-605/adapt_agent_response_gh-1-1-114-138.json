{
  "code": "@Override\npublic void onReceive(final android.content.Context context, final android.content.Intent intent) {\n\tfinal android.bluetooth.BluetoothDevice device = intent != null ? intent.getParcelableExtra(android.bluetooth.BluetoothDevice.EXTRA_DEVICE) : null;\n\tif (device == null)\n\t\treturn;\n\n\tfinal android.bluetooth.BluetoothGatt gatt = mBluetoothGatt;\n\tif (gatt == null)\n\t\treturn;\n\n\tfinal android.bluetooth.BluetoothDevice gattDevice = gatt.getDevice();\n\tif (gattDevice == null)\n\t\treturn;\n\n\tfinal java.lang.String address = device.getAddress();\n\tif (address == null || !address.equals(gattDevice.getAddress()))\n\t\treturn;\n\n\tfinal int bondState = intent.getIntExtra(android.bluetooth.BluetoothDevice.EXTRA_BOND_STATE, android.bluetooth.BluetoothDevice.BOND_NONE);\n\n\tfinal java.lang.String deviceName = device.getName() != null ? device.getName() : \"unknown\";\n\tno.nordicsemi.android.nrftoolbox.utility.DebugLogger.i(TAG, \"Bond state changed for device: \" + deviceName + \", state=\" + bondState);\n\n\tswitch (bondState) {\n\t\tcase android.bluetooth.BluetoothDevice.BOND_BONDING:\n\t\t\t// Notify that bonding is required\n\t\t\tmCallbacks.onBondingRequired(device);\n\t\t\tbreak;\n\t\tcase android.bluetooth.BluetoothDevice.BOND_BONDED:\n\t\t\t// Notify bonded and restart initialization by discovering services again\n\t\t\tmCallbacks.onBonded(device);\n\t\t\tgatt.discoverServices();\n\t\t\tbreak;\n\t\tdefault:\n\t\t\t// no-op\n\t\t\tbreak;\n\t}\n}",
  "explanation": "code_hardening: Added early-return guards for null intent, device, BluetoothGatt, GATT device, and address mismatch before any logic executes.\nresolve_compilation_errors: Updated callback invocations to use BluetoothDevice parameters and removed obsolete calls (no notification enabling or receiver unregistration). Referenced fully qualified Android and DebugLogger classes where imports are not shown.\nexception_handling: none.\nlogic_customization: Moved logging after the device filter, switched to info-level logging, logged the device name instead of address, handled multiple bond states by invoking a new bonding-required callback on BOND_BONDING and onBonded(device) on BOND_BONDED, and restarted initialization by calling BluetoothGatt.discoverServices().\nrefactoring: Simplified and clarified local variable usage (gatt, gattDevice, deviceName) and structured bond-state handling with a switch statement.\nmisc: Added a concise log message consistent with project logging style; no other side effects introduced."
}