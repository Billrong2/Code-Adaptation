{
  "code": "public static Bitmap blur(Context ctx, Bitmap sourceBitmap, float radius) {\n        if (ctx == null || sourceBitmap == null) return sourceBitmap;\n\n        // Clamp radius to RenderScript supported range (0 < r <= 25)\n        float safeRadius = radius;\n        if (safeRadius <= 0f) safeRadius = 0.1f;\n        if (safeRadius > 25f) safeRadius = 25f;\n\n        android.support.v8.renderscript.RenderScript rs = null;\n        android.support.v8.renderscript.Allocation tmpIn = null;\n        android.support.v8.renderscript.Allocation tmpOut = null;\n        try {\n            // Operate at full resolution; output size matches input size\n            Bitmap outputBitmap = Bitmap.createBitmap(sourceBitmap.getWidth(), sourceBitmap.getHeight(), Bitmap.Config.ARGB_8888);\n\n            rs = android.support.v8.renderscript.RenderScript.create(ctx);\n            android.support.v8.renderscript.ScriptIntrinsicBlur blurScript =\n                    android.support.v8.renderscript.ScriptIntrinsicBlur.create(rs, android.support.v8.renderscript.Element.U8_4(rs));\n\n            tmpIn = android.support.v8.renderscript.Allocation.createFromBitmap(rs, sourceBitmap);\n            tmpOut = android.support.v8.renderscript.Allocation.createFromBitmap(rs, outputBitmap);\n\n            blurScript.setRadius(safeRadius);\n            blurScript.setInput(tmpIn);\n            blurScript.forEach(tmpOut);\n            tmpOut.copyTo(outputBitmap);\n\n            return outputBitmap;\n        } catch (android.support.v8.renderscript.RSIllegalArgumentException e) {\n            // Invalid radius or RenderScript state; fall back to original bitmap\n            return sourceBitmap;\n        } catch (IllegalArgumentException e) {\n            // Bitmap/allocation creation failure; fall back safely\n            return sourceBitmap;\n        } finally {\n            if (tmpIn != null) tmpIn.destroy();\n            if (tmpOut != null) tmpOut.destroy();\n            if (rs != null) rs.destroy();\n        }\n    }",
  "explanation": "code_hardening: Added null checks for Context and Bitmap, validated and clamped the blur radius to the RenderScript-supported range, and ensured all RenderScript resources (Allocation and RenderScript) are destroyed in a finally block.\nresolve_compilation_errors: Removed all references to BITMAP_SCALE and BLUR_RADIUS and updated the method signature to accept a float radius parameter. Used fully qualified RenderScript classes to avoid import ambiguity.\nexception_handling: Wrapped RenderScript and bitmap operations in try/catch blocks to handle RSIllegalArgumentException and IllegalArgumentException, safely falling back to the original bitmap on failure.\nlogic_customization: Changed the API to accept a float radius and passed it directly to setRadius. Removed bitmap pre-scaling and processed the image at its original dimensions so the output bitmap matches the input size exactly.\nrefactoring: Renamed the bitmap parameter to sourceBitmap for clarity and removed scaling-related locals to simplify the processing flow.\nmisc: none"
}