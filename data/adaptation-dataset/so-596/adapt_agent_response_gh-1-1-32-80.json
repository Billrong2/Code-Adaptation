{
  "code": "private Dimension computeSize(Container target) {\n  synchronized (target.getTreeLock()) {\n    int hgap = getHgap();\n    int vgap = getVgap();\n    int containerWidth = target.getWidth();\n\n    // Let this behave like a regular FlowLayout (single row) if the container\n    // hasn't been assigned any size yet.\n    if (containerWidth == 0) {\n      containerWidth = Integer.MAX_VALUE;\n    }\n\n    Insets insets = target.getInsets();\n    if (insets == null) {\n      insets = new Insets(0, 0, 0, 0);\n    }\n\n    int requiredWidth = 0;\n    int maxWidth = containerWidth - (insets.left + insets.right + hgap * 2);\n    int componentCount = target.getComponentCount();\n\n    int x = 0;\n    // FlowLayout starts by adding vgap, so do that here too.\n    int y = insets.top + vgap;\n    int rowHeight = 0;\n\n    for (int i = 0; i < componentCount; i++) {\n      Component component = target.getComponent(i);\n      if (component.isVisible()) {\n        Dimension preferredSize = component.getPreferredSize();\n        if ((x == 0) || ((x + preferredSize.width) <= maxWidth)) {\n          // Fits in the current row.\n          if (x > 0) {\n            x += hgap;\n          }\n          x += preferredSize.width;\n          rowHeight = Math.max(rowHeight, preferredSize.height);\n        } else {\n          // Start a new row.\n          x = preferredSize.width;\n          y += vgap + rowHeight;\n          rowHeight = preferredSize.height;\n        }\n        requiredWidth = Math.max(requiredWidth, x);\n      }\n    }\n\n    y += rowHeight;\n    y += insets.bottom;\n\n    return new Dimension(requiredWidth + insets.left + insets.right, y);\n  }\n}",
  "explanation": "code_hardening: none\nresolve_compilation_errors: none\nexception_handling: none\nlogic_customization: none\nrefactoring: Renamed variables for clarity (e.g., w to containerWidth, reqdWidth to requiredWidth, maxwidth to maxWidth, n to componentCount) and clarified loop-local names. Applied consistent indentation and spacing, and reflowed existing comments without changing meaning or behavior.\nmisc: Minor formatting cleanup (brace placement, line breaks) to improve readability only."
}