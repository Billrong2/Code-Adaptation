{
  "code": "private Dimension computeSize(Container target) {\n    synchronized (target.getTreeLock()) {\n        final int hgap = getHgap();\n        final int vgap = getVgap();\n        int w = target.getWidth();\n\n        // Let this behave like a regular FlowLayout (single row)\n        // if the container hasn't been assigned any size yet\n        if (w == 0) {\n            w = Integer.MAX_VALUE;\n        }\n\n        Insets insets = target.getInsets();\n        if (insets == null) {\n            insets = new Insets(0, 0, 0, 0);\n        }\n\n        int reqdWidth = 0;\n        final int maxwidth = w - (insets.left + insets.right + hgap * 2);\n        final int n = target.getComponentCount();\n        int x = 0;\n        int y = insets.top + vgap; // FlowLayout starts by adding vgap, so do that here too.\n        int rowHeight = 0;\n\n        for (int i = 0; i < n; i++) {\n            final Component c = target.getComponent(i);\n            if (c.isVisible()) {\n                final Dimension d = c.getPreferredSize();\n                if ((x == 0) || ((x + d.width) <= maxwidth)) {\n                    // fits in current row.\n                    if (x > 0) {\n                        x += hgap;\n                    }\n                    x += d.width;\n                    rowHeight = Math.max(rowHeight, d.height);\n                } else {\n                    // Start of new row\n                    x = d.width;\n                    y += vgap + rowHeight;\n                    rowHeight = d.height;\n                }\n                reqdWidth = Math.max(reqdWidth, x);\n            }\n        }\n\n        y += rowHeight;\n        y += insets.bottom;\n        return new Dimension(reqdWidth + insets.left + insets.right, y);\n    }\n}",
  "explanation": "code_hardening: none\nresolve_compilation_errors: none\nexception_handling: none\nlogic_customization: none\nrefactoring: Applied cosmetic-only refactoring by normalizing indentation and brace placement, and marking local variables as final where it does not affect semantics. Method name, signature, control flow, synchronization, and calculations remain unchanged.\nmisc: Formatting and whitespace normalization only; comments preserved and aligned for readability."
}