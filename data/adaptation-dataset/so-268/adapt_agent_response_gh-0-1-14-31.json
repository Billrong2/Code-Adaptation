{
"code":"@Override\npublic Cursor query(Uri uri, String[] projection, String selection, String[] selectionArgs, String sortOrder) {\n    Cursor sourceCursor = null;\n    try {\n        sourceCursor = super.query(uri, projection, selection, selectionArgs, sortOrder);\n        if (sourceCursor == null) {\n            return null;\n        }\n\n        String[] columnNames = sourceCursor.getColumnNames();\n        if (columnNames == null) {\n            return sourceCursor;\n        }\n\n        String[] newColumnNames = columnNamesWithData(columnNames);\n        MatrixCursor resultCursor = new MatrixCursor(newColumnNames, sourceCursor.getCount());\n\n        sourceCursor.moveToPosition(-1);\n        while (sourceCursor.moveToNext()) {\n            MatrixCursor.RowBuilder row = resultCursor.newRow();\n            for (int i = 0; i < columnNames.length; i++) {\n                row.add(sourceCursor.getString(i));\n            }\n        }\n\n        return resultCursor;\n    } catch (IllegalStateException e) {\n        return sourceCursor;\n    } finally {\n        if (sourceCursor != null && !sourceCursor.isClosed()) {\n            sourceCursor.close();\n        }\n    }\n}",
"explanation":"code_hardening: Added null checks for the source cursor and its column names, guarded cursor positioning, and ensured the original cursor is closed in a finally block to prevent leaks.\nresolve_compilation_errors: Used the existing columnNamesWithData(String[]) method already defined in the class; referenced Cursor, MatrixCursor, and Uri consistently with the surrounding codebase. No new APIs were required.\nexception_handling: Wrapped cursor access logic in a try/catch to defensively handle IllegalStateException and used a finally block to guarantee resource cleanup.\nlogic_customization: Preserved the original logic of copying rows and using getString(i) for column values, and ensured newColumnNames aligns with the values added per row without altering behavior.\nrefactoring: Renamed local variables to sourceCursor and resultCursor for clarity and readability while keeping the method signature unchanged.\nmisc: none"}