{
  "code": "@TargetApi(Build.VERSION_CODES.KITKAT)\nprivate static String getPath(final Context context, final Uri uri) {\n\n    final boolean isKitKat = Build.VERSION.SDK_INT >= Build.VERSION_CODES.KITKAT;\n\n    // DocumentProvider\n    if (isKitKat && DocumentsContract.isDocumentUri(context, uri)) {\n        // ExternalStorageProvider\n        if (isExternalStorageDocument(uri)) {\n            final String docId = DocumentsContract.getDocumentId(uri);\n            final String[] split = docId.split(\":\");\n            final String type = split[0];\n\n            if (\"primary\".equalsIgnoreCase(type)) {\n                return Environment.getExternalStorageDirectory() + \"/\" + split[1];\n            }\n\n            // TODO handle non-primary volumes\n        }\n        // DownloadsProvider\n        else if (isDownloadsDocument(uri)) {\n\n            final String id = DocumentsContract.getDocumentId(uri);\n            final Uri contentUri = ContentUris.withAppendedId(\n                    Uri.parse(\"content://downloads/public_downloads\"), Long.valueOf(id));\n\n            return getDataColumn(context, contentUri, null, null);\n        }\n        // MediaProvider\n        else if (isMediaDocument(uri)) {\n            final String docId = DocumentsContract.getDocumentId(uri);\n            final String[] split = docId.split(\":\");\n            final String type = split[0];\n\n            Uri contentUri = null;\n            if (\"image\".equals(type)) {\n                contentUri = MediaStore.Images.Media.EXTERNAL_CONTENT_URI;\n            } else if (\"video\".equals(type)) {\n                contentUri = MediaStore.Video.Media.EXTERNAL_CONTENT_URI;\n            } else if (\"audio\".equals(type)) {\n                contentUri = MediaStore.Audio.Media.EXTERNAL_CONTENT_URI;\n            }\n\n            final String selection = \"_id=?\";\n            final String[] selectionArgs = new String[] {\n                    split[1]\n            };\n\n            return getDataColumn(context, contentUri, selection, selectionArgs);\n        }\n    }\n    // MediaStore (and general)\n    else if (\"content\".equalsIgnoreCase(uri.getScheme())) {\n        return getDataColumn(context, uri, null, null);\n    }\n    // File\n    else if (\"file\".equalsIgnoreCase(uri.getScheme())) {\n        return uri.getPath();\n    }\n\n    return null;\n}",
  "explanation": "code_hardening: none\nresolve_compilation_errors: Verified that all required Android framework classes (DocumentsContract, ContentUris, MediaStore, Build, Environment, TargetApi) are already imported in the file, and that helper methods getDataColumn, isDownloadsDocument, isExternalStorageDocument, and isMediaDocument exist in the same class and remain accessible.\nexception_handling: none\nlogic_customization: none; the control flow, conditions, and return behavior are preserved exactly as in the original Stack Overflow snippet.\nrefactoring: Changed the method visibility from public to private to restrict external access while keeping the static modifier and signature compatible with existing internal callers.\nmisc: Added the @TargetApi(Build.VERSION_CODES.KITKAT) annotation to the method to indicate intentional use of KitKat-specific APIs and suppress related warnings; no new custom API calls were introduced."
}