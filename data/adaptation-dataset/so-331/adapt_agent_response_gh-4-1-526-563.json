{
  "code": "protected JDialog createDialog(Component parent) {\n        // derive parent Frame safely\n        Frame owner = null;\n        if (parent != null) {\n            if (parent instanceof Frame) {\n                owner = (Frame) parent;\n            } else {\n                Component c = parent;\n                while (c != null) {\n                    if (c instanceof Frame) {\n                        owner = (Frame) c;\n                        break;\n                    }\n                    c = c.getParent();\n                }\n            }\n        }\n\n        final JDialog dialog = new JDialog(owner, \"Select Font\", true);\n        dialog.setDefaultCloseOperation(WindowConstants.DISPOSE_ON_CLOSE);\n\n        // actions\n        final Action okAction = new DialogOKAction(dialog);\n        final Action cancelAction = new DialogCancelAction(dialog);\n\n        // buttons\n        final JButton okButton = new JButton(okAction);\n        final JButton cancelButton = new JButton(cancelAction);\n        okButton.setFocusable(false);\n        cancelButton.setFocusable(false);\n        okButton.setFont(DEFAULT_FONT);\n        cancelButton.setFont(DEFAULT_FONT);\n\n        // button panel (east)\n        final JPanel buttonPanel = new JPanel();\n        buttonPanel.setLayout(new BoxLayout(buttonPanel, BoxLayout.Y_AXIS));\n        buttonPanel.setBorder(BorderFactory.createEmptyBorder(10, 10, 10, 10));\n        buttonPanel.add(okButton);\n        buttonPanel.add(Box.createVerticalStrut(5));\n        buttonPanel.add(cancelButton);\n\n        // content layout\n        final Container content = dialog.getContentPane();\n        content.setLayout(new BorderLayout());\n        content.add(this, BorderLayout.CENTER);\n        content.add(buttonPanel, BorderLayout.EAST);\n        ((JComponent) content).setBorder(BorderFactory.createEmptyBorder(5, 5, 5, 5));\n\n        // key bindings\n        final JRootPane rootPane = dialog.getRootPane();\n        final InputMap im = rootPane.getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW);\n        final ActionMap am = rootPane.getActionMap();\n        im.put(KeyStroke.getKeyStroke(KeyEvent.VK_ESCAPE, 0), DialogCancelAction.ACTION_NAME);\n        im.put(KeyStroke.getKeyStroke(KeyEvent.VK_ENTER, 0), DialogOKAction.ACTION_NAME);\n        am.put(DialogCancelAction.ACTION_NAME, cancelAction);\n        am.put(DialogOKAction.ACTION_NAME, okAction);\n\n        dialog.pack();\n        dialog.setLocationRelativeTo(owner);\n        return dialog;\n    }",
  "explanation": "code_hardening: Safely derived the parent Frame by walking the ancestor hierarchy and handled null parent by allowing a null owner. Marked dialog, actions, buttons, panels, and containers as final where applicable.\nresolve_compilation_errors: Introduced the missing protected createDialog(Component) method expected by showDialog, removed any reliance on constructor-only logic, and used existing inner action classes and constants without adding new fields or dependencies.\nexception_handling: none.\nlogic_customization: Built a modal JDialog titled “Select Font,” placed the chooser component (this) in the center with a vertically stacked OK/Cancel panel on the east, wired OK/Cancel actions to dialogResultValue semantics, and bound ESC/ENTER via the dialog root pane InputMap/ActionMap at WHEN_IN_FOCUSED_WINDOW scope. Packed and centered the dialog relative to the parent frame before returning it.\nrefactoring: Extracted dialog creation into a protected factory method with a clear responsibility boundary, replacing constructor-based UI assembly concerns for dialog presentation.\nmisc: Set buttons non-focusable, applied the default font, added spacing borders for consistent layout, and relied on existing Swing APIs (javax.swing.JDialog, javax.swing.InputMap, javax.swing.ActionMap, javax.swing.KeyStroke) only."}