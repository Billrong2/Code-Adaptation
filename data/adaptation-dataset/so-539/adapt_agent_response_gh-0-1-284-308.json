{
"code":"\n\t/**\n\t * Replaces all occurrences of {@code target} in {@code source} with {@code replacement},\n\t * performing the match in a case-insensitive manner while preserving the original\n\t * character casing outside the replaced regions.\n\t *\n\t * @param source the source string to operate on\n\t * @param target the string to find (case-insensitive)\n\t * @param replacement the replacement string\n\t * @return a new string with all case-insensitive occurrences of {@code target} replaced,\n\t *         or {@code source} if no replacement can be performed\n\t */\n\tpublic static String replaceIgnoreCase(final String source, final String target, final String replacement) {\n\t\t// Hardening: null and empty checks\n\t\tif (source == null || target == null || replacement == null) {\n\t\t\treturn source;\n\t\t}\n\t\tif (target.length() == 0) {\n\t\t\t// Avoid infinite loop; nothing sensible to replace\n\t\t\treturn source;\n\t\t}\n\n\t\tStringBuilder result = new StringBuilder(source);\n\t\tStringBuilder sourceLower = new StringBuilder(source.toLowerCase());\n\t\tString searchString = target.toLowerCase();\n\n\t\tint idx = 0;\n\t\twhile ((idx = sourceLower.indexOf(searchString, idx)) != -1) {\n\t\t\tresult.replace(idx, idx + searchString.length(), replacement);\n\t\t\tsourceLower.replace(idx, idx + searchString.length(), replacement);\n\t\t\tidx += replacement.length();\n\t\t}\n\n\t\treturn result.toString();\n\t}\n",
"explanation":"code_hardening: Added null checks for source, target, and replacement, and an explicit empty-target check to avoid an infinite loop. Marked parameters as final to reinforce immutability.\nresolve_compilation_errors: none.\nexception_handling: none; no checked or runtime exceptions are intentionally handled as per the plan.\nlogic_customization: Core replacement logic remains unchanged from the original snippet; only a safe early-return was added for an empty target edge case.\nrefactoring: Renamed the method to replaceIgnoreCase for clarity, renamed local variables for readability, and removed redundant cleanup of temporary StringBuilder instances.\nmisc: Added a Javadoc comment with description and @param/@return tags and applied minor formatting adjustments to match existing style. New custom API calls: none."}