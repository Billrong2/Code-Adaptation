{
  "code": "/**\n     * Converts a glob pattern to an equivalent regular expression string.\n     * <p>\n     * Based on a well-known Stack Overflow implementation for glob-to-regex conversion.\n     * </p>\n     *\n     * @param str the glob pattern to convert\n     * @return a regular expression representing the given glob pattern\n     * @throws IllegalArgumentException if {@code str} is {@code null}\n     */\n    public static String convertGlobToRegex(final String str) {\n        if (str == null) {\n            throw new IllegalArgumentException(\"Input glob string must not be null\");\n        }\n\n        String line = str.trim();\n        int strLen = line.length();\n        final StringBuilder sb = new StringBuilder(strLen);\n\n        // Remove beginning and ending * globs because they're useless\n        if (line.startsWith(\"*\")) {\n            line = line.substring(1);\n            strLen--;\n        }\n        if (line.endsWith(\"*\")) {\n            line = line.substring(0, strLen - 1);\n            strLen--;\n        }\n\n        boolean escaping = false;\n        int inCurlies = 0;\n        for (char currentChar : line.toCharArray()) {\n            switch (currentChar) {\n                case '*':\n                    if (escaping)\n                        sb.append(\"\\\\*\");\n                    else\n                        sb.append(\".*\");\n                    escaping = false;\n                    break;\n                case '?':\n                    if (escaping)\n                        sb.append(\"\\\\?\");\n                    else\n                        sb.append('.');\n                    escaping = false;\n                    break;\n                case '.':\n                case '(':\n                case ')':\n                case '+':\n                case '|':\n                case '^':\n                case '$':\n                case '@':\n                case '%':\n                    sb.append('\\\\');\n                    sb.append(currentChar);\n                    escaping = false;\n                    break;\n                case '\\\\':\n                    if (escaping) {\n                        sb.append(\"\\\\\\\\\");\n                        escaping = false;\n                    } else {\n                        escaping = true;\n                    }\n                    break;\n                case '{':\n                    if (escaping) {\n                        sb.append(\"\\\\{\");\n                    } else {\n                        sb.append('(');\n                        inCurlies++;\n                    }\n                    escaping = false;\n                    break;\n                case '}':\n                    if (inCurlies > 0 && !escaping) {\n                        sb.append(')');\n                        inCurlies--;\n                    } else if (escaping) {\n                        sb.append(\"\\\\}\");\n                    } else {\n                        sb.append(\"}\");\n                    }\n                    escaping = false;\n                    break;\n                case ',':\n                    if (inCurlies > 0 && !escaping) {\n                        sb.append('|');\n                    } else if (escaping) {\n                        sb.append(\"\\\\,\");\n                    } else {\n                        sb.append(\",\");\n                    }\n                    break;\n                default:\n                    escaping = false;\n                    sb.append(currentChar);\n            }\n        }\n        return sb.toString();\n    }",
  "explanation": "code_hardening: Added a null-check for the input parameter and defined behavior by throwing IllegalArgumentException; marked the method as public static and the StringBuilder as final where safe.\nresolve_compilation_errors: Removed the LOG reference entirely and ensured the method is static with no instance state or external dependencies.\nexception_handling: None added beyond the explicit IllegalArgumentException for invalid input, per plan.\nlogic_customization: Preserved the glob-to-regex conversion logic exactly as in the original snippet; no behavioral changes were introduced.\nrefactoring: Renamed the method to convertGlobToRegex, renamed the parameter to str, adjusted formatting to match project style, and added a Javadoc comment describing purpose and origin.\nmisc: Removed logging side effects and performed minor cosmetic cleanup; no new custom API calls were introduced."
}