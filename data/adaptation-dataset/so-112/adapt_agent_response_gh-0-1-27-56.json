{
  "code": "public static void show(final Context context, final FragmentManager fragmentManager) {\n        if (context == null || fragmentManager == null) {\n            return;\n        }\n\n        boolean shouldShow = false;\n        SharedPreferences sharedPreferences = getSharedPreferences(context);\n        SharedPreferences.Editor editor = sharedPreferences.edit();\n        long currentTime = System.currentTimeMillis();\n        long lastPromptTime = sharedPreferences.getLong(LAST_PROMPT, 0);\n        if (lastPromptTime == 0) {\n            lastPromptTime = currentTime;\n            editor.putLong(LAST_PROMPT, lastPromptTime);\n        }\n\n        if (!sharedPreferences.getBoolean(DISABLED, false)) {\n            int launches = sharedPreferences.getInt(LAUNCHES, 0) + 1;\n            if (launches > LAUNCHES_UNTIL_PROMPT) {\n                if (currentTime > lastPromptTime + MILLIS_UNTIL_PROMPT) {\n                    shouldShow = true;\n                }\n            }\n            editor.putInt(LAUNCHES, launches);\n        }\n\n        if (shouldShow) {\n            editor.putInt(LAUNCHES, 0)\n                    .putLong(LAST_PROMPT, System.currentTimeMillis())\n                    .apply();\n            new RateItDialogFragment().show(fragmentManager, null);\n        } else {\n            editor.apply();\n        }\n    }",
  "explanation": "code_hardening: Added null checks for context and fragmentManager with an early return, and marked parameters as final. Ensured the SharedPreferences.Editor is not reused after apply() is called.\nresolve_compilation_errors: Preserved the existing show(Context, FragmentManager) signature and used in-scope constants and the existing getSharedPreferences(Context) helper; no new APIs were introduced.\nexception_handling: none.\nlogic_customization: Replaced commit() with apply() in both the shouldShow and else branches while keeping all timing, counter, and condition logic unchanged.\nrefactoring: none.\nmisc: none."
}