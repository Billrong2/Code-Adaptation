{
  "code": "@Override\npublic boolean onTouchEvent(android.view.MotionEvent ev) {\n    // Evaluate swipe-out only on ACTION_UP; ACTION_MOVE is a no-op here\n    final int action = ev.getAction() & android.support.v4.view.MotionEventCompat.ACTION_MASK;\n\n    // Adapter and bounds safety\n    final android.support.v4.view.PagerAdapter adapter = getAdapter();\n    final int count = adapter != null ? adapter.getCount() : 0;\n    final int currentItem = getCurrentItem();\n\n    final boolean hasItems = count > 0 && currentItem >= 0 && currentItem < count;\n    final boolean isFirst = hasItems && currentItem == 0;\n    final boolean isLast = hasItems && currentItem == count - 1;\n\n    if (action == android.view.MotionEvent.ACTION_UP && hasItems) {\n        final float x = ev.getX();\n        // Ensure mStartDragX was initialized elsewhere (e.g., onInterceptTouchEvent)\n        if (mListener != null) {\n            if (isFirst && x > mStartDragX) {\n                // Rightward swipe on first item\n                mListener.onSwipeOutAtStart();\n            } else if (isLast && x < mStartDragX) {\n                // Leftward swipe on last item\n                mListener.onSwipeOutAtEnd();\n            }\n        }\n    }\n\n    // Reset start drag only when not at an edge\n    if (!isFirst && !isLast) {\n        mStartDragX = 0f;\n    }\n\n    try {\n        return super.onTouchEvent(ev);\n    } catch (Exception e) {\n        return false;\n    }\n}",
  "explanation": "code_hardening: Added null and bounds checks for the adapter, item count, and current item; guarded listener callbacks with null checks; assumed mStartDragX is initialized elsewhere and avoided using it when adapter state is invalid.\nresolve_compilation_errors: Used fully qualified names for MotionEvent, MotionEventCompat, and PagerAdapter to avoid import issues; relied on existing ViewPager methods getAdapter(), getCurrentItem(), and getCount().\nexception_handling: Wrapped super.onTouchEvent(ev) in a try/catch and returned false on exception to prevent crashes.\nlogic_customization: Evaluated swipe-out only on ACTION_UP; added first-edge handling to invoke onSwipeOutAtStart on rightward swipe; restricted end-edge handling to last item with leftward swipe for onSwipeOutAtEnd; removed ACTION_DOWN handling and kept ACTION_MOVE as a no-op; reset mStartDragX only when not at an edge and not inside ACTION_UP.\nrefactoring: Simplified and clarified edge detection with boolean flags (isFirst/isLast) and reduced nested conditionals for readability.\nmisc: Updated inline comments to reflect new first-edge and last-edge swipe behavior; no new custom API calls were introduced."
}