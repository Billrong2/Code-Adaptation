{
  "code": "  // Reference: Adapted from a Stack Overflow answer on fast BufferedImage pixel copying using DataBufferInt.\n  private static void copySrcIntoDstAt(final BufferedImage src,\n                                       final BufferedImage dst,\n                                       final int dx,\n                                       final int dy) {\n    if (src == null || dst == null) {\n      throw new IllegalArgumentException(\"Source and destination images must not be null\");\n    }\n\n    if (!(src.getRaster().getDataBuffer() instanceof DataBufferInt) ||\n        !(dst.getRaster().getDataBuffer() instanceof DataBufferInt)) {\n      throw new IllegalArgumentException(\"Both images must use DataBufferInt\");\n    }\n\n    final int srcWidth  = src.getWidth();\n    final int srcHeight = src.getHeight();\n    final int dstWidth  = dst.getWidth();\n    final int dstHeight = dst.getHeight();\n\n    if (dx < 0 || dy < 0 || dx + srcWidth > dstWidth || dy + srcHeight > dstHeight) {\n      throw new IllegalArgumentException(\"Source image does not fit within destination at the given offset\");\n    }\n\n    final int[] srcbuf = ((DataBufferInt) src.getRaster().getDataBuffer()).getData();\n    final int[] dstbuf = ((DataBufferInt) dst.getRaster().getDataBuffer()).getData();\n\n    int srcoffs = 0;\n    int dstoffs = dx + dy * dstWidth;\n\n    for (int y = 0; y < srcHeight; y++, srcoffs += srcWidth, dstoffs += dstWidth) {\n      System.arraycopy(srcbuf, srcoffs, dstbuf, dstoffs, srcWidth);\n    }\n  }",
  "explanation": "code_hardening: Added null checks for src and dst, validated image bounds to prevent out-of-bounds writes, and verified both images use DataBufferInt. Marked parameters and most locals as final where applicable.\nresolve_compilation_errors: Preserved a private static method signature compatible with its usage from the ImageCopier runnable; relied on existing imports already present in the file. No new APIs required.\nexception_handling: Introduced explicit IllegalArgumentException checks to fail fast with descriptive messages instead of allowing ClassCastException or ArrayIndexOutOfBoundsException later.\nlogic_customization: None; the pixel-copy loop and System.arraycopy semantics are identical to the original Stack Overflow snippet when inputs are valid.\nrefactoring: Reordered local variable declarations so srcoffs is declared before dstoffs, improved whitespace and alignment, and clarified width/height locals without changing behavior.\nmisc: Added a brief reference comment above the method pointing to the original Stack Overflow source; no logging or annotation changes."
}