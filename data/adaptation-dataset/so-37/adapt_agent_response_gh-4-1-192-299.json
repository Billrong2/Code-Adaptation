{
  "code": "    /**\n     * Converts a standard POSIX shell globbing pattern into a Java regular expression.\n     * The returned regex can be used with {@link java.util.regex.Pattern} to\n     * recognize strings matching the supplied glob.\n     * <p>\n     * See also the POSIX Shell language specification:\n     * http://pubs.opengroup.org/onlinepubs/009695399/utilities/xcu_chap02.html#tag_02_13_01\n     * </p>\n     * <p>\n     * Attribution: conversion logic adapted from a publicly available Stack Overflow answer\n     * discussing glob-to-regex translation.\n     * </p>\n     *\n     * @param pattern a glob pattern\n     * @return a regex pattern corresponding to the given glob\n     */\n    private static String convertGlobToRegex(String pattern) {\n        StringBuilder sb = new StringBuilder(pattern.length());\n        int inGroup = 0;\n        int inClass = 0;\n        int firstIndexInClass = -1;\n        char[] arr = pattern.toCharArray();\n        for (int i = 0; i < arr.length; i++) {\n            char ch = arr[i];\n            switch (ch) {\n                case '\\\\':\n                    if (++i >= arr.length) {\n                        sb.append('\\\\');\n                    } else {\n                        char next = arr[i];\n                        switch (next) {\n                            case ',':\n                                // escape not needed\n                                break;\n                            case 'Q':\n                            case 'E':\n                                // extra escape needed\n                                sb.append('\\\\');\n                            default:\n                                sb.append('\\\\');\n                        }\n                        sb.append(next);\n                    }\n                    break;\n                case '*':\n                    if (inClass == 0) {\n                        sb.append(\".*\");\n                    } else {\n                        sb.append('*');\n                    }\n                    break;\n                case '?':\n                    if (inClass == 0) {\n                        sb.append('.');\n                    } else {\n                        sb.append('?');\n                    }\n                    break;\n                case '[':\n                    inClass++;\n                    firstIndexInClass = i + 1;\n                    sb.append('[');\n                    break;\n                case ']':\n                    inClass--;\n                    sb.append(']');\n                    break;\n                case '.':\n                case '(':\n                case ')':\n                case '+':\n                case '|':\n                case '^':\n                case '$':\n                case '@':\n                case '%':\n                    if (inClass == 0 || (firstIndexInClass == i && ch == '^')) {\n                        sb.append('\\\\');\n                    }\n                    sb.append(ch);\n                    break;\n                case '!':\n                    if (firstIndexInClass == i) {\n                        sb.append('^');\n                    } else {\n                        sb.append('!');\n                    }\n                    break;\n                case '{':\n                    inGroup++;\n                    sb.append('(');\n                    break;\n                case '}':\n                    inGroup--;\n                    sb.append(')');\n                    break;\n                case ',':\n                    if (inGroup > 0) {\n                        sb.append('|');\n                    } else {\n                        sb.append(',');\n                    }\n                    break;\n                default:\n                    sb.append(ch);\n            }\n        }\n        return sb.toString();\n    }",
  "explanation": "code_hardening: none\nresolve_compilation_errors: Ensured the method is private but remains in the same class as matchesGlob so existing calls compile without visibility issues; no other changes required.\nexception_handling: none\nlogic_customization: none; the glob-to-regex conversion logic is preserved exactly as in the source snippet.\nrefactoring: Changed the method signature to private static and removed the final modifier; applied minor formatting adjustments without altering control flow or behavior.\nmisc: Updated Javadoc wording for clarity, added attribution to the original public source, and applied style-consistent whitespace and formatting tweaks only."
}