{
  "code": "// Reference: https://stackoverflow.com/questions/17693578/android-set-listview-height-based-on-children\npublic static void setListViewHeightBasedOnChildren(final android.widget.ListView listView) {\n    android.widget.ListAdapter listAdapter = listView.getAdapter();\n    if (listAdapter == null) {\n        return;\n    }\n\n    int totalHeight = listView.getPaddingTop() + listView.getPaddingBottom();\n    for (int i = 0; i < listAdapter.getCount(); i++) {\n        android.view.View listItem = listAdapter.getView(i, null, listView);\n        if (listItem instanceof android.view.ViewGroup)\n            listItem.setLayoutParams(new android.view.ViewGroup.LayoutParams(android.view.ViewGroup.LayoutParams.WRAP_CONTENT, android.view.ViewGroup.LayoutParams.WRAP_CONTENT));\n        listItem.measure(0, 0);\n        totalHeight += listItem.getMeasuredHeight();\n    }\n\n    android.view.ViewGroup.LayoutParams params = listView.getLayoutParams();\n    params.height = totalHeight + (listView.getDividerHeight() * (listAdapter.getCount() - 1));\n    listView.setLayoutParams(params);\n}",
  "explanation": "code_hardening: Preserved the original null check for the ListAdapter exactly as-is and did not introduce additional validation to avoid changing behavior; marked the ListView parameter as final since it does not alter runtime semantics.\nresolve_compilation_errors: Converted the method to public static so it can be invoked without an instance; used fully qualified Android class names inside the function to ensure compilation without relying on implicit imports in a static context.\nexception_handling: none.\nlogic_customization: none; the measurement logic, height calculation, and ListView layout behavior are unchanged from the original snippet.\nrefactoring: Limited refactoring strictly to making the method static and adjusting type references; method name, parameters, and internal variables remain unchanged.\nmisc: Added a reference comment URL above the method documenting the Stack Overflow source as required; no other comments or formatting changes were introduced."
}