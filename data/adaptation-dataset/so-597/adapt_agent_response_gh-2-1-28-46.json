{
  "code": "public static Map<String, Object> toMap(final JSONObject object) throws JSONException {\n        final Map<String, Object> map = new HashMap<String, Object>();\n        if (object == null || object == JSONObject.NULL) {\n            return map;\n        }\n        final Iterator<String> keysItr = object.keys();\n        while (keysItr.hasNext()) {\n            final String key = keysItr.next();\n            Object value = object.get(key);\n            if (value == JSONObject.NULL) {\n                value = null;\n            } else if (value instanceof JSONArray) {\n                value = toList((JSONArray) value);\n            } else if (value instanceof JSONObject) {\n                value = toMap((JSONObject) value);\n            }\n            map.put(key, value);\n        }\n        return map;\n    }",
  "explanation": "code_hardening: Added null checks for the input JSONObject and handled JSONObject.NULL values explicitly; marked parameters and key locals as final for robustness.\nresolve_compilation_errors: none.\nexception_handling: Updated the method signature to declare throws JSONException so JSON access errors propagate to callers (jsonToMap, toList).\nlogic_customization: Replaced iteration via keySet().iterator() with JSONObject.keys() while keeping recursive handling of JSONObject and JSONArray unchanged.\nrefactoring: Simplified iterator usage and improved variable naming consistency without altering recursion or data conversion logic.\nmisc: No additional custom API calls were introduced; behavior aligns with existing project style and documentation."
}