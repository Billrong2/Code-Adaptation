{
  "code": "private float readUsage(android.content.Context context)\n{\n    final int IDX_IDLE = 5; // shifted by +1 due to single-space split\n    final int IDX_CPU_USER = 3;\n    final int IDX_CPU_NICE = 4;\n    final int IDX_CPU_SYSTEM = 6;\n    final int IDX_CPU_IDLE = 7; // not used directly\n    final int IDX_CPU_IOWAIT = 8;\n    final int IDX_CPU_IRQ = 9;\n\n    java.io.RandomAccessFile reader = null;\n\n    try\n    {\n        reader = new java.io.RandomAccessFile(\"/proc/stat\", \"r\");\n        String load = reader.readLine();\n\n        if (load == null)\n            return 0f;\n\n        String[] toks = load.split(\" \"); // split on single space, may include empty tokens\n\n        if (toks.length <= IDX_CPU_IRQ)\n            return 0f;\n\n        long idle1 = Long.parseLong(toks[IDX_IDLE]);\n        long cpu1 = Long.parseLong(toks[IDX_CPU_USER])\n                + Long.parseLong(toks[IDX_CPU_NICE])\n                + Long.parseLong(toks[IDX_CPU_SYSTEM])\n                + Long.parseLong(toks[IDX_CPU_IOWAIT])\n                + Long.parseLong(toks[IDX_CPU_IRQ]);\n\n        try\n        {\n            Thread.sleep(360);\n        }\n        catch (InterruptedException ie)\n        {\n            edu.northwestern.cbits.purple_robot_manager.logging.LogManager.getInstance(context).logException(ie);\n            Thread.currentThread().interrupt();\n            return 0f;\n        }\n\n        reader.seek(0);\n        load = reader.readLine();\n\n        if (load == null)\n            return 0f;\n\n        toks = load.split(\" \");\n\n        if (toks.length <= IDX_CPU_IRQ)\n            return 0f;\n\n        long idle2 = Long.parseLong(toks[IDX_IDLE]);\n        long cpu2 = Long.parseLong(toks[IDX_CPU_USER])\n                + Long.parseLong(toks[IDX_CPU_NICE])\n                + Long.parseLong(toks[IDX_CPU_SYSTEM])\n                + Long.parseLong(toks[IDX_CPU_IOWAIT])\n                + Long.parseLong(toks[IDX_CPU_IRQ]);\n\n        long totalDiff = (cpu2 + idle2) - (cpu1 + idle1);\n        long cpuDiff = cpu2 - cpu1;\n\n        if (totalDiff <= 0)\n            return 0f;\n\n        return (float) cpuDiff / (float) totalDiff;\n    }\n    catch (java.io.IOException ex)\n    {\n        edu.northwestern.cbits.purple_robot_manager.logging.LogManager.getInstance(context).logException(ex);\n    }\n    catch (NumberFormatException ex)\n    {\n        edu.northwestern.cbits.purple_robot_manager.logging.LogManager.getInstance(context).logException(ex);\n    }\n    finally\n    {\n        if (reader != null)\n        {\n            try\n            {\n                reader.close();\n            }\n            catch (java.io.IOException ex)\n            {\n                edu.northwestern.cbits.purple_robot_manager.logging.LogManager.getInstance(context).logException(ex);\n            }\n        }\n    }\n\n    return 0f;\n}",
  "explanation": "code_hardening: Added explicit null checks for lines read from /proc/stat, validated token array length before index access, guarded against division by zero, handled InterruptedException explicitly with interrupt restoration, and ensured RandomAccessFile is always closed in a finally block.\nresolve_compilation_errors: Updated the method signature to accept android.content.Context, matching existing callers, and used fully qualified class names inside the function where appropriate; no external helpers were introduced.\nexception_handling: Replaced printStackTrace with LogManager.getInstance(context).logException(...) for IOException, InterruptedException, and NumberFormatException, and defined a consistent fallback return value of 0f after logging.\nlogic_customization: Changed tokenization to split on a single space, adjusted all CPU and idle field indices by +1 to preserve logical mapping to /proc/stat, and kept the original sampling delay, reread, and delta-based CPU usage calculation intact.\nrefactoring: Replaced magic indices with named local constants for CPU and idle fields and used clearer intermediate variable names (cpuDiff, totalDiff) to improve readability within the function.\nmisc: Added brief inline comments clarifying index shifts and behavior; new custom API usage introduced: edu.northwestern.cbits.purple_robot_manager.logging.LogManager.getInstance(Context).logException(Throwable)."
}