{
  "code": "public static void adjustHue(ColorMatrix cm, float value)\n{\n    if (cm == null) {\n        return;\n    }\n\n    value = cleanValue(value, 180f) / 180f * (float) Math.PI;\n    if (value == 0) {\n        return;\n    }\n\n    float cosVal = (float) Math.cos(value);\n    float sinVal = (float) Math.sin(value);\n    float lumR = 0.213f;\n    float lumG = 0.715f;\n    float lumB = 0.072f;\n\n    // 4x5 ColorMatrix (20 elements): RGB rows + alpha row\n    float[] mat = new float[] {\n            lumR + cosVal * (1 - lumR) + sinVal * (-lumR),\n            lumG + cosVal * (-lumG) + sinVal * (-lumG),\n            lumB + cosVal * (-lumB) + sinVal * (1 - lumB),\n            0f, 0f,\n\n            lumR + cosVal * (-lumR) + sinVal * (0.143f),\n            lumG + cosVal * (1 - lumG) + sinVal * (0.140f),\n            lumB + cosVal * (-lumB) + sinVal * (-0.283f),\n            0f, 0f,\n\n            lumR + cosVal * (-lumR) + sinVal * (-(1 - lumR)),\n            lumG + cosVal * (-lumG) + sinVal * (lumG),\n            lumB + cosVal * (1 - lumB) + sinVal * (lumB),\n            0f, 0f,\n\n            0f, 0f, 0f, 1f, 0f\n    };\n\n    cm.postConcat(new ColorMatrix(mat));\n}",
  "explanation": "code_hardening: Added a null-check for the ColorMatrix parameter to safely no-op when cm is null, preventing a NullPointerException. Continued to rely on existing cleanValue usage to keep the input within expected bounds.\nresolve_compilation_errors: Corrected the ColorMatrix initialization to a valid 4x5 (20-element) float array by removing the extra final row from the SO snippet, ensuring the constructor matches the Android ColorMatrix API.\nexception_handling: none.\nlogic_customization: Preserved the original hue-adjustment math exactly, retained the early return when value == 0, kept the alpha row as [0, 0, 0, 1, 0] so alpha remains unchanged, and continued to apply the adjustment via postConcat.\nrefactoring: Reformatted and aligned the matrix definition to clearly reflect the 4x5 structure for readability, without renaming methods or altering behavior.\nmisc: none."
}