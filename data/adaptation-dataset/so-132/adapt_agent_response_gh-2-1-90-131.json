{
  "code": "public static void copyJarResourcesRecursively(final File destDir, final JarURLConnection jarConnection) throws IOException {\n    if (jarConnection == null) {\n      throw new IOException(\"JarURLConnection must not be null\");\n    }\n    if (destDir == null) {\n      throw new IOException(\"Destination directory must not be null\");\n    }\n\n    final String baseEntryName = jarConnection.getEntryName();\n    final String normalizedBase = (baseEntryName == null || baseEntryName.length() == 0)\n        ? \"\"\n        : (baseEntryName.endsWith(\"/\") ? baseEntryName : baseEntryName + \"/\");\n\n    if (!FileUtils.ensureDirectoryExists(destDir)) {\n      throw new IOException(\"Could not create destination directory: \" + destDir);\n    }\n\n    try (JarFile jarFile = jarConnection.getJarFile()) {\n      final Enumeration<JarEntry> entries = jarFile.entries();\n\n      while (entries.hasMoreElements()) {\n        final JarEntry entry = entries.nextElement();\n        final String entryName = entry.getName();\n\n        if (!entryName.startsWith(normalizedBase)) {\n          continue;\n        }\n\n        final String relativePath = entryName.substring(normalizedBase.length());\n        if (relativePath.length() == 0) {\n          continue;\n        }\n\n        final File targetFile = new File(destDir, relativePath);\n\n        if (entry.isDirectory()) {\n          if (!FileUtils.ensureDirectoryExists(targetFile)) {\n            throw new IOException(\"Could not create directory: \" + targetFile);\n          }\n        } else {\n          final File parentDir = targetFile.getParentFile();\n          if (parentDir != null && !FileUtils.ensureDirectoryExists(parentDir)) {\n            throw new IOException(\"Could not create directory: \" + parentDir);\n          }\n\n          try (InputStream is = jarFile.getInputStream(entry)) {\n            if (!FileUtils.copyStream(is, targetFile)) {\n              throw new IOException(\"Failed to copy JAR entry to file: \" + targetFile);\n            }\n          }\n        }\n      }\n    }\n  }",
  "explanation": "code_hardening: Added null checks for JarURLConnection and destination directory, normalized the base entry prefix safely, ensured destination and parent directories exist before writes, and used try-with-resources to reliably close JarFile and InputStream resources.\nresolve_compilation_errors: Replaced all File-based traversal with java.util.jar.JarFile and JarEntry iteration, updated the signature to accept (File, JarURLConnection) and to throw IOException, and relied on existing utilities FileUtils.copyStream(InputStream, File) and FileUtils.ensureDirectoryExists(File).\nexception_handling: Changed from boolean signaling to exception-based failure by declaring throws IOException and throwing IOExceptions on directory creation or stream copy failures; removed assertions entirely.\nlogic_customization: Implemented JAR entry iteration filtered by the JarURLConnection entry prefix, derived relative paths by stripping the base prefix, appended them to the destination directory, and handled directories versus files using JarEntry metadata with stream-based copying for files.\nrefactoring: Renamed and made the method public to reflect JAR resource extraction semantics, reordered parameters to (destDir, JarURLConnection), and improved variable names to reflect JAR concepts (baseEntryName, entry, relativePath, targetFile).\nmisc: Updated inline comments and formatting to match the existing utility style; new custom API calls used (not in the SO snippet) include java.util.jar.JarFile#getInputStream(JarEntry) and FileUtils.ensureDirectoryExists(File)."
}