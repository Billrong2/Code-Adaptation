{
  "code": "public static boolean copyJarResourcesRecursively(final File destDir, final JarURLConnection jarConn, final FilenameFilter filter) throws IOException {\n\t// validate inputs\n\tif (destDir == null || jarConn == null || filter == null) {\n\t\tthrow new IllegalArgumentException(\"destDir, jarConn and filter must not be null\");\n\t}\n\tif (!destDir.exists() && !ensureDirectoryExists(destDir)) {\n\t\tthrow new IOException(\"Cannot create destination directory: \" + destDir);\n\t}\n\tif (!destDir.isDirectory() || !destDir.canWrite()) {\n\t\tthrow new IOException(\"Destination is not a writable directory: \" + destDir);\n\t}\n\n\tfinal JarFile jarFile = jarConn.getJarFile();\n\tfinal String entryPrefix = jarConn.getEntryName();\n\tfinal String normalizedPrefix = entryPrefix == null ? \"\" : (entryPrefix.endsWith(\"/\") ? entryPrefix : entryPrefix + \"/\");\n\tfinal String destRootPath = destDir.getCanonicalPath() + File.separator;\n\n\tfor (final Enumeration<JarEntry> e = jarFile.entries(); e.hasMoreElements();) {\n\t\tfinal JarEntry entry = e.nextElement();\n\t\tfinal String entryName = entry.getName();\n\n\t\t// select only entries under the requested prefix\n\t\tif (!Strings.isNullOrEmpty(normalizedPrefix) && !entryName.startsWith(normalizedPrefix)) {\n\t\t\tcontinue;\n\t\t}\n\t\t// skip directories\n\t\tif (entry.isDirectory()) {\n\t\t\tcontinue;\n\t\t}\n\n\t\t// compute destination-relative path\n\t\tString relativePath = removeStart(entryName, normalizedPrefix);\n\t\tif (relativePath.startsWith(\"/\")) {\n\t\t\trelativePath = relativePath.substring(1);\n\t\t}\n\n\t\tfinal File destFile = new File(destDir, relativePath);\n\n\t\t// guard against path traversal\n\t\tfinal String destFilePath = destFile.getCanonicalPath();\n\t\tif (!destFilePath.startsWith(destRootPath)) {\n\t\t\tthrow new IOException(\"Illegal jar entry path: \" + entryName);\n\t\t}\n\n\t\t// apply filename filter\n\t\tfinal File parentDir = destFile.getParentFile();\n\t\tif (!filter.accept(parentDir, destFile.getName())) {\n\t\t\tcontinue;\n\t\t}\n\n\t\t// ensure parent directories exist\n\t\tif (parentDir != null && !ensureDirectoryExists(parentDir)) {\n\t\t\tthrow new IOException(\"Cannot create directory: \" + parentDir);\n\t\t}\n\n\t\t// copy entry contents\n\t\ttry (InputStream is = jarFile.getInputStream(entry)) {\n\t\t\tif (!copyStream(is, destFile)) {\n\t\t\t\treturn false; // per-file copy failure\n\t\t\t}\n\t\t}\n\t}\n\treturn true;\n}\n",
  "explanation": "code_hardening: Added null checks for all parameters, validated destination directory existence and writability, ensured parent directories are created, used canonical-path checks to guard against path traversal, and used try-with-resources for each JarEntry InputStream.\nresolve_compilation_errors: Removed all filesystem-recursive logic and File-based traversal, iterated over java.util.jar.JarFile entries, relied on existing helpers ensureDirectoryExists(File), copyStream(InputStream, File), and removeStart(String,String), and used fully qualified JDK types already imported in the file.\nexception_handling: Changed behavior to throw IOException for jar access, directory creation, and security/path issues; removed assert usage; returned false only when an individual file copy fails, as specified.\nlogic_customization: Implemented jar-based extraction using JarURLConnection and JarFile, filtered entries by the connection entry prefix, stripped the prefix to compute destination-relative paths, skipped directory entries, applied FilenameFilter, and copied data from jar entry InputStreams to destination files.\nrefactoring: Consolidated logic into a single iterative method reflecting extraction semantics, simplified control flow by removing recursion, and used clearer variable names tied to jar extraction.\nmisc: Updated inline comments to describe jar-based extraction steps and formatted code to match existing project style. New custom API calls used (not in SO snippet): java.net.JarURLConnection#getJarFile(), java.util.jar.JarFile#entries(), java.util.jar.JarFile#getInputStream(JarEntry)."}