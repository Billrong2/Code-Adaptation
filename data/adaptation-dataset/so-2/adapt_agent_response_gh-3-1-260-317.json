{
  "code": "public static Bitmap getRoundedCornerBitmap(final Bitmap sourceBitmap, final int width, final int height, final float cornerRadius, final boolean squareTL, final boolean squareTR, final boolean squareBL, final boolean squareBR) {\n\t// Validate inputs\n\tif (sourceBitmap == null) {\n\t\treturn null;\n\t}\n\tif (width <= 0 || height <= 0) {\n\t\tthrow new IllegalArgumentException(\"Width and height must be > 0\");\n\t}\n\n\tfinal Bitmap output = Bitmap.createBitmap(width, height, Bitmap.Config.ARGB_8888);\n\tfinal Canvas canvas = new Canvas(output);\n\n\tfinal int MASK_COLOR = 0xff424242;\n\tfinal Paint paint = new Paint();\n\tpaint.setAntiAlias(true);\n\n\tfinal Rect dstRect = new Rect(0, 0, width, height);\n\tfinal RectF dstRectF = new RectF(dstRect);\n\n\t// Clear canvas\n\tcanvas.drawARGB(0, 0, 0, 0);\n\n\t// Draw rounded rectangle mask\n\tpaint.setColor(MASK_COLOR);\n\tfinal float radius = Math.max(0f, cornerRadius);\n\tcanvas.drawRoundRect(dstRectF, radius, radius, paint);\n\n\t// Overlay squares to force square corners where requested\n\t// Top-left\n\tif (squareTL) {\n\t\tcanvas.drawRect(0, 0, width / 2f, height / 2f, paint);\n\t}\n\t// Top-right\n\tif (squareTR) {\n\t\tcanvas.drawRect(width / 2f, 0, width, height / 2f, paint);\n\t}\n\t// Bottom-left\n\tif (squareBL) {\n\t\tcanvas.drawRect(0, height / 2f, width / 2f, height, paint);\n\t}\n\t// Bottom-right\n\tif (squareBR) {\n\t\tcanvas.drawRect(width / 2f, height / 2f, width, height, paint);\n\t}\n\n\t// SRC_IN the source bitmap, scaling or clipping safely if needed\n\tpaint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.SRC_IN));\n\tfinal Rect srcRect = new Rect(0, 0, sourceBitmap.getWidth(), sourceBitmap.getHeight());\n\tcanvas.drawBitmap(sourceBitmap, srcRect, dstRect, paint);\n\n\tpaint.setXfermode(null);\n\treturn output;\n}",
  "explanation": "code_hardening:\n- Added null check for the source bitmap and validation that width and height are positive, throwing IllegalArgumentException when invalid.\n- Ensured safe rendering when source dimensions differ by drawing with explicit src and dst Rects.\n- Marked local variables as final where appropriate.\n\nresolve_compilation_errors:\n- Removed the Context parameter and all density-related logic.\n- Updated the signature to use a float cornerRadius already expressed in pixels.\n- Used existing Android graphics classes already present in the project.\n\nexception_handling:\n- None; the function relies on input validation and does not introduce try/catch blocks.\n\nlogic_customization:\n- Replaced density-based scaling with direct use of cornerRadius.\n- Corrected square corner quadrants so TL/TR/BL/BR map to true top-left, top-right, bottom-left, and bottom-right areas.\n- Preserved the original rendering flow: rounded rect mask, square overlays, then SRC_IN draw of the source bitmap.\n\nrefactoring:\n- Renamed parameters for clarity (sourceBitmap, width, height, cornerRadius).\n- Extracted the magic mask color into a named constant (MASK_COLOR).\n- Simplified variable naming and ordering for readability within the function.\n\nmisc:\n- Updated inline comments to reflect the new API (no Context, radius already in pixels).\n- No new custom API calls were introduced."
}