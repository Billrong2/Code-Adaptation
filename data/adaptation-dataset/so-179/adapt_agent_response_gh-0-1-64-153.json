{
  "code": "public boolean onTouch(View v, MotionEvent event)\n{\n\t// basic hardening\n\tif (event == null)\n\t\treturn false;\n\n\t// initialize per-view configuration once\n\tif (config == null && v != null)\n\t{\n\t\tconfig = ViewConfiguration.get(v.getContext());\n\t\tminSwipeDistance = config.getScaledTouchSlop();\n\t}\n\n\t// track the touched view across events\n\tif (v != null)\t\n\t\tthis.view = v;\n\n\tboolean thresholdCrossed = false;\n\n\tswitch (event.getAction())\n\t{\n\t\tcase MotionEvent.ACTION_DOWN:\n\t\t\tdownX = event.getX();\n\t\t\tdownY = event.getY();\n\t\tif (listener != null && view != null)\n\t\t\tlistener.onStartSwipe(view);\n\t\treturn true;\n\n\t\tcase MotionEvent.ACTION_MOVE:\n\t\tcase MotionEvent.ACTION_UP:\n\t\t\tupX = event.getX();\n\t\t\tupY = event.getY();\n\n\t\t\tfloat deltaX = downX - upX;\n\t\t\tfloat deltaY = downY - upY;\n\n\t\t\t// horizontal swipe has precedence\n\t\t\tif (Math.abs(deltaX) > minSwipeDistance)\n\t\t\t{\n\t\t\t\tthresholdCrossed = true;\n\t\t\t\tif (listener != null && view != null)\n\t\t\t\t{\n\t\t\t\t\tif (deltaX < 0)\n\t\t\t\t\t\tlistener.onRightSwipe(view);\n\t\t\t\t\telse\n\t\t\t\t\t\tlistener.onLeftSwipe(view);\n\t\t\t\t}\n\t\t\t}\n\t\t\t// vertical swipe only if horizontal was not handled\n\t\t\telse if (Math.abs(deltaY) > minSwipeDistance)\n\t\t\t{\n\t\t\t\tthresholdCrossed = true;\n\t\t\t\tif (listener != null && view != null)\n\t\t\t\t{\n\t\t\t\t\tif (deltaY < 0)\n\t\t\t\t\t\tlistener.onDownSwipe(view);\n\t\t\t\t\telse\n\t\t\t\t\t\tlistener.onUpSwipe(view);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// always notify stop on finger lift\n\t\t\tif (event.getAction() == MotionEvent.ACTION_UP)\n\t\t\t{\n\t\t\t\tif (listener != null && view != null)\n\t\t\t\t\tlistener.onStopSwipe(view);\n\t\t\t}\n\n\t\t\treturn thresholdCrossed;\n\t}\n\n\treturn false;\n}",
  "explanation": "code_hardening: Added null checks for MotionEvent, View, and listener; ensured ViewConfiguration is initialized once and reused; guarded callback invocations with null checks.\nresolve_compilation_errors: Implemented the existing SwipeDetector.onTouch(View, MotionEvent) method using only fields already declared in the class; referenced MotionEvent.ACTION_MOVE explicitly; reused the existing 'view' instance field to store the touched View.\nexception_handling: none.\nlogic_customization: Invoked listener.onStartSwipe(View) on ACTION_DOWN; extended swipe detection to ACTION_MOVE as well as ACTION_UP; enforced horizontal-over-vertical precedence using if/else-if; replaced early returns with a thresholdCrossed flag; ensured listener.onStopSwipe(View) is always invoked on ACTION_UP; adjusted return values to return true only when a swipe threshold is crossed (except ACTION_DOWN, which always returns true).\nrefactoring: Stored the touched View in the instance field for reuse across events; simplified control flow by consolidating MOVE and UP handling and using a single return flag.\nmisc: Updated inline comments and switch structure to reflect the new callbacks and multi-phase swipe behavior; no new custom API calls were introduced."
}