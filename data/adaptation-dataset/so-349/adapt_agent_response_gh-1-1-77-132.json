{
  "code": "@Override\npublic void paintBorder(\n        final Component c,\n        final Graphics g,\n        final int x,\n        final int y,\n        final int width,\n        final int height)\n{\n    if (!(g instanceof Graphics2D))\n    {\n        return;\n    }\n\n    if (width <= 0 || height <= 0 || thickness < 0 || pointerSize < 0)\n    {\n        return;\n    }\n\n    final Graphics2D g2 = (Graphics2D) g;\n\n    final int bottomLineY = height - thickness - pointerSize;\n\n    final RoundRectangle2D.Double bubble = new RoundRectangle2D.Double(\n            strokePad,\n            strokePad,\n            width - thickness,\n            bottomLineY,\n            radii,\n            radii);\n\n    final Polygon pointer = new Polygon();\n\n    if (left)\n    {\n        // left point\n        pointer.addPoint(\n                strokePad + radii + pointerPad,\n                bottomLineY);\n        // right point\n        pointer.addPoint(\n                strokePad + radii + pointerPad + pointerSize,\n                bottomLineY);\n        // bottom point\n        pointer.addPoint(\n                strokePad + radii + pointerPad + (pointerSize / 2),\n                height - strokePad);\n    }\n    else\n    {\n        // left point\n        pointer.addPoint(\n                width - (strokePad + radii + pointerPad),\n                bottomLineY);\n        // right point\n        pointer.addPoint(\n                width - (strokePad + radii + pointerPad + pointerSize),\n                bottomLineY);\n        // bottom point\n        pointer.addPoint(\n                width - (strokePad + radii + pointerPad + (pointerSize / 2)),\n                height - strokePad);\n    }\n\n    final Area area = new Area(bubble);\n    area.add(new Area(pointer));\n\n    g2.setRenderingHints(hints);\n\n    // Paint the BG color of the parent everywhere outside the clip of the text bubble\n    final Component parent = c != null ? c.getParent() : null;\n    if (parent != null)\n    {\n        final Color bg = parent.getBackground();\n        final Rectangle rect = new Rectangle(0, 0, width, height);\n        final Area borderRegion = new Area(rect);\n        borderRegion.subtract(area);\n        g2.setClip(borderRegion);\n        g2.setColor(bg);\n        g2.fillRect(0, 0, width, height);\n        g2.setClip(null);\n    }\n\n    g2.setColor(color);\n    g2.setStroke(stroke);\n    g2.draw(area);\n}",
  "explanation": "code_hardening: Added early returns for non-Graphics2D instances, null component safety when accessing the parent, and guards against invalid geometry values (non-positive width/height and negative thickness/pointerSize). Marked parameters and locals as final where applicable.\nresolve_compilation_errors: Used only fields already declared in the class (thickness, pointerSize, strokePad, radii, pointerPad, left, hints, color, stroke) and existing AWT/geom types; no new symbols introduced. none\nexception_handling: Avoided potential ClassCastException by checking instanceof before casting Graphics to Graphics2D; no checked exceptions added. none\nlogic_customization: None; drawing logic, calculations, and behavior remain identical to the source.\nrefactoring: Standardized brace placement, spacing, and indentation; aligned parameters and broke long expressions consistently; removed redundant arithmetic like 0 + strokePad for clarity without changing results.\nmisc: Minor comment formatting and consistent style applied; no new APIs introduced."
}