{
  "code": "private void initInfoPerResource(int row, int col) {\n\t// Reset UI info collections\n\tcolours.clear();\n\ttooltips.clear();\n\n\t// Basic validation\n\tif (model == null || model.getRowKeys() == null) {\n\t\treturn;\n\t}\n\tif (row < 0 || row >= model.getRowKeys().size()) {\n\t\treturn;\n\t}\n\n\tObject rowKey = model.getRowKeys().get(row);\n\tif (!(rowKey instanceof TaskSeries)) {\n\t\treturn;\n\t}\n\n\tTaskSeries series = (TaskSeries) rowKey;\n\t@SuppressWarnings(\"unchecked\")\n\tList<Task> tasks = series.getTasks();\n\tif (tasks == null || col < 0 || col >= tasks.size()) {\n\t\treturn;\n\t}\n\n\tTask task = tasks.get(col);\n\tif (task == null || task.getSubtasks() == null || task.getSubtasks().isEmpty()) {\n\t\treturn;\n\t}\n\n\t// Iterate real subtasks and build colours + tooltips in parallel\n\tfor (Task sub : task.getSubtasks()) {\n\t\tif (!(sub instanceof MySubtask)) {\n\t\t\tcontinue;\n\t\t}\n\t\tMySubtask mySubtask = (MySubtask) sub;\n\t\tGanttItem item = mySubtask.getItem();\n\t\tif (item == null) {\n\t\t\tcontinue;\n\t\t}\n\n\t\t// Resolve colour by activity id with safe fallback\n\t\tColor colour = null;\n\t\tif (colourMap != null && item.getActivityId() != null) {\n\t\t\tcolour = colourMap.get(item.getActivityId());\n\t\t}\n\t\tif (colour == null) {\n\t\t\tcolour = Color.GRAY;\n\t\t}\n\t\tcolours.add(colour);\n\n\t\t// Tooltip uses the item name where available\n\t\tString tooltip = item.getName();\n\t\ttooltips.add(tooltip != null ? tooltip : \"\");\n\t}\n}",
  "explanation": "code_hardening:\n- Cleared both `colours` and `tooltips` at the start and added null/bounds checks for `model`, `model.getRowKeys()`, row index, task list, selected task, and subtasks.\n- Guarded against missing `colourMap` entries and null `activityId` by providing a safe fallback color.\n- Early-returned when there are no valid subtasks to avoid downstream errors.\n\nresolve_compilation_errors:\n- Implemented the method `initInfoPerResource(int row, int col)` expected by `getItemPaint`.\n- Used existing fields `colours`, `tooltips`, `model`, and `colourMap` already declared in `MyRenderer`.\n- Cast subtasks to the existing inner type `MySubtask` and accessed `GanttItem` via `getItem()`.\n- Removed all HSB-related locals and logic from the SO snippet, as they are no longer applicable.\n\nexception_handling:\n- none.\n\nlogic_customization:\n- Changed behavior from generating a synthetic HSB gradient to iterating the actual subtasks of the selected task (`tasks.get(col)`).\n- Built per-subtask UI info by resolving a color from `colourMap` keyed by the subtask’s `activityId` and adding the subtask item’s name as a tooltip.\n- Populated parallel `colours` and `tooltips` collections instead of a single color list.\n\nrefactoring:\n- Reflected the new responsibility through the method name `initInfoPerResource` and clearer local variable names.\n- Simplified control flow by directly iterating subtasks and separating validation, lookup, and collection updates.\n\nmisc:\n- Added brief inline comments to document intent and improve readability.\n- No new custom API calls beyond existing project and JFreeChart APIs were introduced."
}