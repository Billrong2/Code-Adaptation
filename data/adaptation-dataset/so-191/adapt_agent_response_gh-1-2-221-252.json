{
  "code": "private void updatePredecessorsWithCheckMode(final TreePath tp, final boolean checkMode) {\n\t// Propagate check state changes upward based on children states (ignore checkMode)\n\tif (tp == null) {\n\t\treturn;\n\t}\n\tTreePath parentPath = tp.getParentPath();\n\twhile (parentPath != null) {\n\t\tCheckedNode parentState = nodesCheckingState.get(parentPath);\n\t\tif (parentState == null) {\n\t\t\treturn;\n\t\t}\n\t\tObject parentComponent = parentPath.getLastPathComponent();\n\t\tif (!(parentComponent instanceof DefaultMutableTreeNode)) {\n\t\t\treturn;\n\t\t}\n\t\tDefaultMutableTreeNode parentNode = (DefaultMutableTreeNode) parentComponent;\n\t\tint childCount = parentNode.getChildCount();\n\t\tif (childCount <= 0) {\n\t\t\t// No children: nothing to aggregate, stop propagation\n\t\t\treturn;\n\t\t}\n\t\tboolean anyChildSelected = false;\n\t\tboolean allChildrenSelected = true;\n\t\tfor (int i = 0; i < childCount; i++) {\n\t\t\tObject child = parentNode.getChildAt(i);\n\t\t\tTreePath childPath = parentPath.pathByAddingChild(child);\n\t\t\tCheckedNode childState = nodesCheckingState.get(childPath);\n\t\t\tif (childState == null) {\n\t\t\t\tallChildrenSelected = false;\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (childState.isSelected) {\n\t\t\t\tanyChildSelected = true;\n\t\t\t}\n\t\t\tif (!childState.isSelected || !childState.allChildrenSelected) {\n\t\t\t\tallChildrenSelected = false;\n\t\t\t}\n\t\t}\n\t\tparentState.isSelected = anyChildSelected;\n\t\tparentState.allChildrenSelected = allChildrenSelected;\n\t\tif (parentState.isSelected) {\n\t\t\tcheckedPaths.add(parentPath);\n\t\t} else {\n\t\t\tcheckedPaths.remove(parentPath);\n\t\t}\n\t\tparentPath = parentPath.getParentPath();\n\t}\n}",
  "explanation": "code_hardening: Added null checks for TreePath, parent state, and node types; guarded against parents with zero children; used final parameters and local validation to avoid NPEs.\nresolve_compilation_errors: Implemented the missing method updatePredecessorsWithCheckMode(TreePath, boolean) using existing project fields (nodesCheckingState, checkedPaths) and Swing tree types (javax.swing.tree.TreePath, javax.swing.tree.DefaultMutableTreeNode).\nexception_handling: none.\nlogic_customization: Replaced UI/event-driven behavior with pure model logic that recomputes ancestor states from children only, ignoring the passed boolean flag; updated checkedPaths based on recomputed isSelected and propagated until the root.\nrefactoring: Used clear local names (parentState, childState, anyChildSelected, allChildrenSelected) and structured the loop to separate aggregation from state assignment for readability.\nmisc: Added concise comments documenting upward propagation rules and stopping conditions; no logging or UI interactions."
}