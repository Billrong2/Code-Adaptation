{
  "code": "public static void lockOrientation(android.app.Activity activity) {\n    if (activity == null) {\n        return;\n    }\n\n    android.view.WindowManager windowManager = activity.getWindowManager();\n    if (windowManager == null) {\n        return;\n    }\n\n    android.view.Display display = windowManager.getDefaultDisplay();\n    if (display == null) {\n        return;\n    }\n\n    int rotation = display.getRotation();\n\n    android.graphics.Point size = new android.graphics.Point();\n    display.getSize(size);\n    int screenWidth = size.x;\n    int screenHeight = size.y;\n\n    switch (rotation) {\n        case android.view.Surface.ROTATION_90:\n            if (screenWidth > screenHeight) {\n                activity.setRequestedOrientation(android.content.pm.ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);\n            }\n            else {\n                activity.setRequestedOrientation(android.content.pm.ActivityInfo.SCREEN_ORIENTATION_REVERSE_PORTRAIT);\n            }\n            break;\n\n        case android.view.Surface.ROTATION_180:\n            if (screenHeight > screenWidth) {\n                activity.setRequestedOrientation(android.content.pm.ActivityInfo.SCREEN_ORIENTATION_REVERSE_PORTRAIT);\n            }\n            else {\n                activity.setRequestedOrientation(android.content.pm.ActivityInfo.SCREEN_ORIENTATION_REVERSE_LANDSCAPE);\n            }\n            break;\n\n        case android.view.Surface.ROTATION_270:\n            if (screenWidth > screenHeight) {\n                activity.setRequestedOrientation(android.content.pm.ActivityInfo.SCREEN_ORIENTATION_REVERSE_LANDSCAPE);\n            }\n            else {\n                activity.setRequestedOrientation(android.content.pm.ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);\n            }\n            break;\n\n        default:\n            // Safe default for unexpected rotation values\n            if (screenHeight > screenWidth) {\n                activity.setRequestedOrientation(android.content.pm.ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);\n            }\n            else {\n                activity.setRequestedOrientation(android.content.pm.ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);\n            }\n            break;\n    }\n}",
  "explanation": "code_hardening: Added null checks for the Activity, WindowManager, and Display to prevent NullPointerException, and included a safe default branch for unexpected rotation values.\nresolve_compilation_errors: Converted the method to a public static utility, replaced the implicit activity field with a method parameter, and ensured only non-deprecated APIs are used with fully qualified type references where necessary.\nexception_handling: none.\nlogic_customization: Removed SDK version checks and deprecated getWidth/getHeight calls, always using Display.getSize(Point) while preserving the original rotation-to-orientation decision logic.\nrefactoring: Replaced magic numeric orientation values with ActivityInfo.SCREEN_ORIENTATION_REVERSE_PORTRAIT and SCREEN_ORIENTATION_REVERSE_LANDSCAPE, and renamed local variables to screenWidth/screenHeight for clarity.\nmisc: Removed obsolete suppression annotations and formatted the method to align with the utility-style static methods used elsewhere in UIUtils. New custom API calls: none."
}