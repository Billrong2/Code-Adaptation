{
  "code": "public static Bitmap getCroppedBitmap(final Bitmap bitmap) {\n    if (bitmap == null) {\n        throw new IllegalArgumentException(\"Bitmap must not be null\");\n    }\n    final int width = bitmap.getWidth();\n    final int height = bitmap.getHeight();\n    if (width <= 0 || height <= 0) {\n        throw new IllegalArgumentException(\"Bitmap must have positive width and height\");\n    }\n\n    final Bitmap output = Bitmap.createBitmap(width, height, Bitmap.Config.ARGB_8888);\n    final Canvas canvas = new Canvas(output);\n\n    final int maskColor = 0xff424242;\n    final Paint paint = new Paint();\n    final Rect rect = new Rect(0, 0, width, height);\n\n    paint.setAntiAlias(true);\n    canvas.drawARGB(0, 0, 0, 0);\n    paint.setColor(maskColor);\n    canvas.drawCircle(width / 2f, height / 2f, width / 2f, paint);\n    paint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.SRC_IN));\n    canvas.drawBitmap(bitmap, rect, rect, paint);\n\n    return output;\n}",
  "explanation": "code_hardening: Added a null check for the input Bitmap and validation for positive width/height, and marked parameters and locals as final where appropriate.\nresolve_compilation_errors: Made the method static and fully qualified enum/constants using Bitmap.Config.ARGB_8888 and PorterDuff.Mode.SRC_IN; relied on existing Android graphics classes available in the project context.\nexception_handling: Threw IllegalArgumentException for invalid input as a defensive measure; no try/catch added per plan.\nlogic_customization: none.\nrefactoring: Kept logic intact while slightly clarifying local variable names and extracting the magic color into a named local constant.\nmisc: Reformatted to standard Java/Android style and removed commented-out dead code; no new custom API calls were introduced."
}