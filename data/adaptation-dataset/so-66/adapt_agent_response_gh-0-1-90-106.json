{
  "code": "@Override\npublic void paint(Graphics g, JComponent c) {\n\tsuper.paint(g, c);\n\tif (g == null || c == null) {\n\t\treturn;\n\t}\n\tif (!(c instanceof JLayer<?>)) {\n\t\treturn;\n\t}\n\tfinal JLayer<?> layer = (JLayer<?>) c;\n\tfinal Object view = layer.getView();\n\tif (!(view instanceof JTabbedPane)) {\n\t\treturn;\n\t}\n\tfinal JTabbedPane tabPane = (JTabbedPane) view;\n\tif (button == null || pt == null || p0 == null) {\n\t\treturn;\n\t}\n\tfinal int inset = 2;\n\tfor (int i = 0; i < tabPane.getTabCount(); i++) {\n\t\tfinal Rectangle rect = tabPane.getBoundsAt(i);\n\t\tif (rect == null) {\n\t\t\tcontinue;\n\t\t}\n\t\tfinal Dimension d = button.getPreferredSize();\n\t\tif (d == null) {\n\t\t\tcontinue;\n\t\t}\n\t\tfinal int x = rect.x + rect.width - d.width - inset;\n\t\tfinal int y = rect.y + (rect.height - d.height) / 2;\n\t\tfinal Rectangle r = new Rectangle(x, y, d.width, d.height);\n\t\tbutton.setForeground(r.contains(pt) ? Color.RED : Color.BLACK);\n\t\tSwingUtilities.paintComponent(g, button, p0, r);\n\t}\n}",
  "explanation": "code_hardening: Added null checks for Graphics, JComponent, layer view, button, point, container panel, and intermediate Rectangle/Dimension values; marked local variables as final where safe.\nresolve_compilation_errors: Replaced raw JLayer usage with JLayer<?> consistently in instanceof checks and casts; ensured all referenced variables (button, pt, p0) are existing fields in scope.\nexception_handling: none\nlogic_customization: Safely retrieved the JTabbedPane by guarding the layer view with instanceof before casting; preserved the original painting and layout calculations to maintain identical rendering.\nrefactoring: Renamed local variable to 'layer' for clarity and introduced a named constant 'inset' to replace the magic number without changing behavior.\nmisc: Minor formatting and comments implicit via clearer structure; no new custom API calls were introduced."
}