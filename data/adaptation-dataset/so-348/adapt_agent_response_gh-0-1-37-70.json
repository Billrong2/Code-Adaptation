{
  "code": "private String extractText(final Reader reader) {\n    if (reader == null) {\n      return \"\";\n    }\n    final StringBuilder builder = new StringBuilder();\n    final HTMLEditorKit.ParserCallback parserCallback = new HTMLEditorKit.ParserCallback() {\n      @Override\n      public void handleText(final char[] data, final int pos) {\n        if (data != null && data.length > 0) {\n          builder.append(data);\n        }\n      }\n\n      @Override\n      public void handleStartTag(final HTML.Tag tag, final MutableAttributeSet attribute, final int pos) {\n        // no-op\n      }\n\n      @Override\n      public void handleEndTag(final HTML.Tag t, final int pos) {\n        // no-op\n      }\n\n      @Override\n      public void handleSimpleTag(final HTML.Tag t, final MutableAttributeSet a, final int pos) {\n        if (HTML.Tag.BR.equals(t)) {\n          builder.append('\\n');\n        }\n      }\n\n      @Override\n      public void handleComment(final char[] data, final int pos) {\n        // no-op\n      }\n\n      @Override\n      public void handleError(final String errMsg, final int pos) {\n        // no-op\n      }\n    };\n    try {\n      new ParserDelegator().parse(reader, parserCallback, true);\n    } catch (IOException e) {\n      throw new RuntimeException(\"Failed to parse HTML content\", e);\n    }\n    return builder.toString();\n  }",
  "explanation": "code_hardening: Added a null check for the Reader, clarified ownership by not closing it (caller-managed), and used a single final StringBuilder to accumulate output safely for large inputs.\nresolve_compilation_errors: Used existing project types (HTMLEditorKit.ParserCallback, HTML.Tag, MutableAttributeSet, ParserDelegator) and added @Override annotations to all callback methods to ensure correct signatures.\nexception_handling: Replaced logging/printing with rethrowing a RuntimeException that wraps the original IOException to propagate failure with preserved cause.\nlogic_customization: Appended text directly to a StringBuilder instead of collecting fragments, and appended a newline character ('\\n') when encountering HTML.Tag.BR to maintain equivalent output.\nrefactoring: Removed the intermediate ArrayList and concatenation loop, simplified the method to return builder.toString(), and clarified variable naming.\nmisc: Changed method visibility to private and added minimal no-op comments for unused callbacks; no new custom API calls were introduced."
}