{
"code":"public static PointDouble getIntersectionPoint(Line lineA, Line lineB) {\n\t// Guard against null inputs\n\tif (lineA == null || lineB == null) {\n\t\treturn null;\n\t}\n\n\tfinal double SEGMENT_TOLERANCE = 1.0;\n\n\tPointDouble aStart = lineA.getStart();\n\tPointDouble aEnd = lineA.getEnd();\n\tPointDouble bStart = lineB.getStart();\n\tPointDouble bEnd = lineB.getEnd();\n\n\tif (aStart == null || aEnd == null || bStart == null || bEnd == null) {\n\t\treturn null;\n\t}\n\n\tdouble x1 = aStart.getX();\n\tdouble y1 = aStart.getY();\n\tdouble x2 = aEnd.getX();\n\tdouble y2 = aEnd.getY();\n\n\tdouble x3 = bStart.getX();\n\tdouble y3 = bStart.getY();\n\tdouble x4 = bEnd.getX();\n\tdouble y4 = bEnd.getY();\n\n\tdouble d = (x1 - x2) * (y3 - y4) - (y1 - y2) * (x3 - x4);\n\tif (d == 0) {\n\t\t// parallel (or coincident) lines\n\t\treturn null;\n\t}\n\n\tdouble xi = ((x3 - x4) * (x1 * y2 - y1 * x2) - (x1 - x2) * (x3 * y4 - y3 * x4)) / d;\n\tdouble yi = ((y3 - y4) * (x1 * y2 - y1 * x2) - (y1 - y2) * (x3 * y4 - y3 * x4)) / d;\n\n\tPointDouble intersection = new PointDouble(xi, yi);\n\n\t// Post-check: ensure intersection lies on both line segments (within tolerance)\n\tif (lineA.getDistanceToPoint(intersection) > SEGMENT_TOLERANCE) {\n\t\treturn null;\n\t}\n\tif (lineB.getDistanceToPoint(intersection) > SEGMENT_TOLERANCE) {\n\t\treturn null;\n\t}\n\n\treturn intersection;\n}","explanation":"code_hardening: Added null guards for input lines and their endpoints, introduced a named tolerance constant, and validated the computed intersection using distance-to-point checks on both segments.\nresolve_compilation_errors: Replaced Line2D/Point2D with Line and PointDouble, updated accessors to getStart()/getEnd() and getX()/getY(), constructed the result with new PointDouble(...), and made the method static to match project usage.\nexception_handling: none.\nlogic_customization: Preserved the infinite-line intersection math and d == 0 parallel check, then added post-validation using Line.getDistanceToPoint(PointDouble) to discard intersections outside the actual segments when distance exceeds the tolerance.\nrefactoring: Clarified variable names for endpoints, reduced scope where possible, and extracted the magic tolerance value into a constant.\nmisc: Updated inline comments to reflect static usage and segment-based intersection behavior; new custom API used: Line.getDistanceToPoint(PointDouble)."}