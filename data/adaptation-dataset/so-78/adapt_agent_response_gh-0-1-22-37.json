{
  "code": "public static String toDuration(long duration) {\n        // Guard against invalid duration\n        if (duration <= 0) {\n            return \"Just Now\";\n        }\n        // Validate required collections\n        if (times == null || timesString == null || times.isEmpty() || timesString.isEmpty()) {\n            return \"Just Now\";\n        }\n        int max = Math.min(times.size(), timesString.size());\n        StringBuilder result = new StringBuilder();\n        for (int i = 0; i < max; i++) {\n            Long current = times.get(i);\n            if (current == null || current <= 0) {\n                continue; // avoid division by zero or invalid units\n            }\n            long temp = duration / current;\n            if (temp > 0) {\n                result.append(temp)\n                      .append(\" \")\n                      .append(timesString.get(i))\n                      .append(temp > 1 ? \"s\" : \"\")\n                      .append(\" ago\");\n                break;\n            }\n        }\n        if (result.length() == 0) {\n            return \"Just Now\";\n        }\n        return result.toString();\n    }",
  "explanation": "code_hardening: Added checks for non-positive duration, null/empty times and timesString, mismatched list sizes via Math.min, and skipped null or non-positive unit values to avoid division by zero.\nresolve_compilation_errors: Replaced Lists.times and Lists.timesString with the class-local static collections times and timesString already defined in TimeAgo; no additional imports needed.\nexception_handling: none.\nlogic_customization: Preserved the original loop and first-non-zero-unit computation and pluralization logic; updated the fallback return value from \"0 second ago\" to \"Just Now\".\nrefactoring: Renamed the accumulator from res to result and replaced StringBuffer with StringBuilder for non-synchronized usage.\nmisc: Minor formatting and inline comments for clarity; no new custom API calls used (none)."
}