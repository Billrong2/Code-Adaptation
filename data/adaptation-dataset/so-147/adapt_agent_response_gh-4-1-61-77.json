{
  "code": "@SuppressWarnings(\"nls\")\nprivate void setupProxyAuthenticator()\n{\n    java.net.Authenticator.setDefault(new java.net.Authenticator()\n    {\n        @Override\n        protected java.net.PasswordAuthentication getPasswordAuthentication()\n        {\n            if (getRequestorType() == java.net.Authenticator.RequestorType.PROXY)\n            {\n                final String protocol = getRequestingProtocol();\n                if (protocol == null || protocol.isEmpty())\n                    return null;\n\n                final String protocolKey = protocol.toLowerCase(java.util.Locale.ROOT);\n                final String host = System.getProperty(protocolKey + \".proxyHost\", \"\");\n                final String port = System.getProperty(protocolKey + \".proxyPort\", \"80\");\n                final String user = System.getProperty(protocolKey + \".proxyUser\", \"\");\n                final String password = System.getProperty(protocolKey + \".proxyPassword\", \"\");\n\n                if (!host.isEmpty() && getRequestingHost() != null && getRequestingHost().equalsIgnoreCase(host))\n                {\n                    try\n                    {\n                        final int proxyPort = Integer.parseInt(port);\n                        if (proxyPort == getRequestingPort())\n                            return new java.net.PasswordAuthentication(user, password.toCharArray());\n                    }\n                    catch (NumberFormatException e)\n                    {\n                        return null;\n                    }\n                }\n            }\n            return null;\n        }\n    });\n}",
  "explanation": "code_hardening: Added null/empty checks for the requesting protocol and proxy host, guarded against invalid port values, and marked locals as final where appropriate to improve robustness.\nresolve_compilation_errors: none.\nexception_handling: Wrapped Integer.parseInt(port) in a try/catch for NumberFormatException to safely handle non-numeric port values while preserving the existing behavior of returning null on mismatch.\nlogic_customization: Combined the host and port checks so the successful authentication path is reached only when both conditions are satisfied, without altering the original proxy-auth logic.\nrefactoring: Renamed the local variable from prot to protocol, applied consistent formatting and braces, and removed the obsolete inline comment.\nmisc: Added @SuppressWarnings(\"nls\") to the method to align with Eclipse/OSGi non-localized string conventions; no new custom API calls were introduced."
}