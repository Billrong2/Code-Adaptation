{
  "code": "/**\n     * Sorts a map by its values.\n     * <p>\n     * Adapted from a Stack Overflow answer (original sorting logic preserved).\n     * The returned map maintains insertion order corresponding to the sorted values.\n     * </p>\n     *\n     * @param unsortMap the map to sort; may be {@code null}\n     * @param order {@code true} for ascending order, {@code false} for descending order\n     * @return a new {@link java.util.LinkedHashMap} containing the sorted entries\n     */\n    private static Map<String, Integer> sortByComparator(final Map<String, Integer> unsortMap, final boolean order) {\n        if (unsortMap == null || unsortMap.isEmpty()) {\n            return new LinkedHashMap<String, Integer>();\n        }\n\n        final List<Map.Entry<String, Integer>> list =\n                new LinkedList<Map.Entry<String, Integer>>(unsortMap.entrySet());\n\n        // Sorting the list based on values\n        Collections.sort(list, new Comparator<Map.Entry<String, Integer>>() {\n            @Override\n            public int compare(final Map.Entry<String, Integer> o1,\n                               final Map.Entry<String, Integer> o2) {\n                if (order) {\n                    return o1.getValue().compareTo(o2.getValue());\n                }\n                return o2.getValue().compareTo(o1.getValue());\n            }\n        });\n\n        // Maintaining insertion order with the help of LinkedHashMap\n        final Map<String, Integer> sortedMap = new LinkedHashMap<String, Integer>();\n        for (final Map.Entry<String, Integer> entry : list) {\n            sortedMap.put(entry.getKey(), entry.getValue());\n        }\n\n        return sortedMap;\n    }",
  "explanation": "code_hardening: Added null and empty checks for the input map to prevent NullPointerException and to return a safe empty LinkedHashMap; marked parameters and locals as final where applicable.\nresolve_compilation_errors: Replaced all unqualified Entry usages with fully qualified Map.Entry in generics and variable declarations; relied on existing java.util types to ensure compilation.\nexception_handling: none.\nlogic_customization: none.\nrefactoring: Applied minor formatting and brace placement cleanups, added @Override annotation, and improved spacing/indentation without changing behavior.\nmisc: Added comprehensive Javadoc including description, Stack Overflow credit, and @param/@return tags; no new custom API calls were introduced."
}